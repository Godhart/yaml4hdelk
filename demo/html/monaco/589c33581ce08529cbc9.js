(()=>{"use strict";var e,t,r,n,s={9616:(e,t,r)=>{var n,s,i,o,a=r(9282),c=r(4881),l=r(6761),u=r(355),h=r(4767),m=r(2847),f=r(1023),p=r(9691),d=r(6060);function g(e,t){if(e.length<t.length)return!1;for(var r=0;r<t.length;r++)if(e[r]!==t[r])return!1;return!0}function y(e,t){var r=e.length-t.length;return r>0?e.lastIndexOf(t)===r:0===r&&e===t}function v(e){return g(e,"(?i)")?new RegExp(e.substring(4),"i"):new RegExp(e)}function b(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;var r,n;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(!b(e[r],t[r]))return!1}else{var s=[];for(n in e)s.push(n);s.sort();var i=[];for(n in t)i.push(n);if(i.sort(),!b(s,i))return!1;for(r=0;r<s.length;r++)if(!b(e[s[r]],t[s[r]]))return!1}return!0}function x(e){return"number"==typeof e}function S(e){return void 0!==e}function A(e){return"boolean"==typeof e}function T(e,t,...r){return function(e,t){return 0===t.length?e:e.replace(/{(\d+)}/g,((e,r)=>{const[n]=r;return void 0===t[n]?e:t[n]}))}(t,r)}function O(){return T}(i=s||(s={}))[i.Undefined=0]="Undefined",i[i.EnumValueMismatch=1]="EnumValueMismatch",i[i.Deprecated=2]="Deprecated",i[i.UnexpectedEndOfComment=257]="UnexpectedEndOfComment",i[i.UnexpectedEndOfString=258]="UnexpectedEndOfString",i[i.UnexpectedEndOfNumber=259]="UnexpectedEndOfNumber",i[i.InvalidUnicode=260]="InvalidUnicode",i[i.InvalidEscapeCharacter=261]="InvalidEscapeCharacter",i[i.InvalidCharacter=262]="InvalidCharacter",i[i.PropertyExpected=513]="PropertyExpected",i[i.CommaExpected=514]="CommaExpected",i[i.ColonExpected=515]="ColonExpected",i[i.ValueExpected=516]="ValueExpected",i[i.CommaOrCloseBacketExpected=517]="CommaOrCloseBacketExpected",i[i.CommaOrCloseBraceExpected=518]="CommaOrCloseBraceExpected",i[i.TrailingComma=519]="TrailingComma",i[i.DuplicateKey=520]="DuplicateKey",i[i.CommentNotPermitted=521]="CommentNotPermitted",i[i.SchemaResolveError=768]="SchemaResolveError",(o||(o={})).LATEST={textDocument:{completion:{completionItem:{documentationFormat:[h.a4.Markdown,h.a4.PlainText],commitCharactersSupport:!0}}}};var w,M,P,j,V=(w=function(e,t){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),C=O(),k={"color-hex":{errorMessage:C("colorHexFormatWarning","Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA."),pattern:/^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/},"date-time":{errorMessage:C("dateTimeFormatWarning","String is not a RFC3339 date-time."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},date:{errorMessage:C("dateFormatWarning","String is not a RFC3339 date."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/i},time:{errorMessage:C("timeFormatWarning","String is not a RFC3339 time."),pattern:/^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},email:{errorMessage:C("emailFormatWarning","String is not an e-mail address."),pattern:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}},I=function(){function e(e,t,r){void 0===r&&(r=0),this.offset=t,this.length=r,this.parent=e}return Object.defineProperty(e.prototype,"children",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"type: "+this.type+" ("+this.offset+"/"+this.length+")"+(this.parent?" parent: {"+this.parent.toString()+"}":"")},e}();function $(e){return A(e)?e?{}:{not:{}}:e}V((function(e,t){var r=j.call(this,e,t)||this;return r.type="null",r.value=null,r}),j=I),function(e){V((function(t,r,n){var s=e.call(this,t,n)||this;return s.type="boolean",s.value=r,s}),e)}(I),function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.type="array",n.items=[],n}V(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this.items},enumerable:!1,configurable:!0})}(I),function(e){V((function(t,r){var n=e.call(this,t,r)||this;return n.type="number",n.isInteger=!0,n.value=Number.NaN,n}),e)}(I),function(e){V((function(t,r,n){var s=e.call(this,t,r,n)||this;return s.type="string",s.value="",s}),e)}(I),function(e){function t(t,r,n){var s=e.call(this,t,r)||this;return s.type="property",s.colonOffset=-1,s.keyNode=n,s}V(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this.valueNode?[this.keyNode,this.valueNode]:[this.keyNode]},enumerable:!1,configurable:!0})}(I),function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.type="object",n.properties=[],n}V(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this.properties},enumerable:!1,configurable:!0})}(I),(P=M||(M={}))[P.Key=0]="Key",P[P.Enum=1]="Enum";var F=function(){function e(e,t){void 0===e&&(e=-1),this.focusOffset=e,this.exclude=t,this.schemas=[]}return e.prototype.add=function(e){this.schemas.push(e)},e.prototype.merge=function(e){Array.prototype.push.apply(this.schemas,e.schemas)},e.prototype.include=function(e){return(-1===this.focusOffset||W(e,this.focusOffset))&&e!==this.exclude},e.prototype.newSub=function(){return new e(-1,this.exclude)},e}(),N=function(){function e(){}return Object.defineProperty(e.prototype,"schemas",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.add=function(e){},e.prototype.merge=function(e){},e.prototype.include=function(e){return!0},e.prototype.newSub=function(){return this},e.instance=new e,e}(),E=function(){function e(){this.problems=[],this.propertiesMatches=0,this.propertiesValueMatches=0,this.primaryValueMatches=0,this.enumValueMatch=!1,this.enumValues=void 0}return e.prototype.hasProblems=function(){return!!this.problems.length},e.prototype.mergeAll=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this.merge(n)}},e.prototype.merge=function(e){this.problems=this.problems.concat(e.problems)},e.prototype.mergeEnumValues=function(e){if(!this.enumValueMatch&&!e.enumValueMatch&&this.enumValues&&e.enumValues){this.enumValues=this.enumValues.concat(e.enumValues);for(var t=0,r=this.problems;t<r.length;t++){var n=r[t];n.code===s.EnumValueMismatch&&(n.message=C("enumWarning","Value is not accepted. Valid values: {0}.",this.enumValues.map((function(e){return JSON.stringify(e)})).join(", ")))}}},e.prototype.mergePropertyMatch=function(e){this.merge(e),this.propertiesMatches++,(e.enumValueMatch||!e.hasProblems()&&e.propertiesMatches)&&this.propertiesValueMatches++,e.enumValueMatch&&e.enumValues&&1===e.enumValues.length&&this.primaryValueMatches++},e.prototype.compare=function(e){var t=this.hasProblems();return t!==e.hasProblems()?t?-1:1:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.primaryValueMatches!==e.primaryValueMatches?this.primaryValueMatches-e.primaryValueMatches:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:this.propertiesMatches-e.propertiesMatches},e}();function D(e){return l.zA(e)}function R(e){return l.F6(e)}function W(e,t,r){return void 0===r&&(r=!1),t>=e.offset&&t<e.offset+e.length||r&&t===e.offset+e.length}function L(e,t,r,n){if(e&&n.include(e)){var i=e;switch(i.type){case"object":!function(e,t,r,n){for(var s=Object.create(null),i=[],o=0,a=e.properties;o<a.length;o++)s[G=(g=a[o]).keyNode.value]=g.valueNode,i.push(G);if(Array.isArray(t.required))for(var c=0,l=t.required;c<l.length;c++)if(!s[M=l[c]]){var u=e.parent&&"property"===e.parent.type&&e.parent.keyNode,h=u?{offset:u.offset,length:u.length}:{offset:e.offset,length:1};r.problems.push({location:h,message:C("MissingRequiredPropWarning",'Missing property "{0}".',M)})}var m=function(e){for(var t=i.indexOf(e);t>=0;)i.splice(t,1),t=i.indexOf(e)};if(t.properties)for(var f=0,p=Object.keys(t.properties);f<p.length;f++){m(M=p[f]);var d=t.properties[M];if(F=s[M])if(A(d))if(d)r.propertiesMatches++,r.propertiesValueMatches++;else{var g=F.parent;r.problems.push({location:{offset:g.keyNode.offset,length:g.keyNode.length},message:t.errorMessage||C("DisallowedExtraPropWarning","Property {0} is not allowed.",M)})}else L(F,d,V=new E,n),r.mergePropertyMatch(V)}if(t.patternProperties)for(var y=0,b=Object.keys(t.patternProperties);y<b.length;y++)for(var S=b[y],T=v(S),O=0,w=i.slice(0);O<w.length;O++){var M=w[O];T.test(M)&&(m(M),(F=s[M])&&(A(d=t.patternProperties[S])?d?(r.propertiesMatches++,r.propertiesValueMatches++):(g=F.parent,r.problems.push({location:{offset:g.keyNode.offset,length:g.keyNode.length},message:t.errorMessage||C("DisallowedExtraPropWarning","Property {0} is not allowed.",M)})):(L(F,d,V=new E,n),r.mergePropertyMatch(V))))}if("object"==typeof t.additionalProperties){for(var P=0,j=i;P<j.length;P++)if(F=s[M=j[P]]){var V=new E;L(F,t.additionalProperties,V,n),r.mergePropertyMatch(V)}}else if(!1===t.additionalProperties&&i.length>0)for(var k=0,I=i;k<I.length;k++){var F;(F=s[M=I[k]])&&(g=F.parent,r.problems.push({location:{offset:g.keyNode.offset,length:g.keyNode.length},message:t.errorMessage||C("DisallowedExtraPropWarning","Property {0} is not allowed.",M)}))}if(x(t.maxProperties)&&e.properties.length>t.maxProperties&&r.problems.push({location:{offset:e.offset,length:e.length},message:C("MaxPropWarning","Object has more properties than limit of {0}.",t.maxProperties)}),x(t.minProperties)&&e.properties.length<t.minProperties&&r.problems.push({location:{offset:e.offset,length:e.length},message:C("MinPropWarning","Object has fewer properties than the required number of {0}",t.minProperties)}),t.dependencies)for(var D=0,R=Object.keys(t.dependencies);D<R.length;D++)if(s[G=R[D]]){var W=t.dependencies[G];if(Array.isArray(W))for(var U=0,_=W;U<_.length;U++){var q=_[U];s[q]?r.propertiesValueMatches++:r.problems.push({location:{offset:e.offset,length:e.length},message:C("RequiredDependentPropWarning","Object is missing property {0} required by property {1}.",q,G)})}else(d=$(W))&&(L(e,d,V=new E,n),r.mergePropertyMatch(V))}var H=$(t.propertyNames);if(H)for(var K=0,B=e.properties;K<B.length;K++){var G;(G=B[K].keyNode)&&L(G,H,r,N.instance)}}(i,t,r,n);break;case"array":!function(e,t,r,n){if(Array.isArray(t.items)){for(var s=t.items,i=0;i<s.length;i++){var o=$(s[i]),a=new E;(m=e.items[i])?(L(m,o,a,n),r.mergePropertyMatch(a)):e.items.length>=s.length&&r.propertiesValueMatches++}if(e.items.length>s.length)if("object"==typeof t.additionalItems)for(var c=s.length;c<e.items.length;c++)a=new E,L(e.items[c],t.additionalItems,a,n),r.mergePropertyMatch(a);else!1===t.additionalItems&&r.problems.push({location:{offset:e.offset,length:e.length},message:C("additionalItemsWarning","Array has too many items according to schema. Expected {0} or fewer.",s.length)})}else{var l=$(t.items);if(l)for(var u=0,h=e.items;u<h.length;u++){var m;L(m=h[u],l,a=new E,n),r.mergePropertyMatch(a)}}var f=$(t.contains);if(f&&(e.items.some((function(e){var t=new E;return L(e,f,t,N.instance),!t.hasProblems()}))||r.problems.push({location:{offset:e.offset,length:e.length},message:t.errorMessage||C("requiredItemMissingWarning","Array does not contain required item.")})),x(t.minItems)&&e.items.length<t.minItems&&r.problems.push({location:{offset:e.offset,length:e.length},message:C("minItemsWarning","Array has too few items. Expected {0} or more.",t.minItems)}),x(t.maxItems)&&e.items.length>t.maxItems&&r.problems.push({location:{offset:e.offset,length:e.length},message:C("maxItemsWarning","Array has too many items. Expected {0} or fewer.",t.maxItems)}),!0===t.uniqueItems){var p=D(e);p.some((function(e,t){return t!==p.lastIndexOf(e)}))&&r.problems.push({location:{offset:e.offset,length:e.length},message:C("uniqueItemsWarning","Array has duplicate items.")})}}(i,t,r,n);break;case"string":!function(e,t,r,n){if(x(t.minLength)&&e.value.length<t.minLength&&r.problems.push({location:{offset:e.offset,length:e.length},message:C("minLengthWarning","String is shorter than the minimum length of {0}.",t.minLength)}),x(t.maxLength)&&e.value.length>t.maxLength&&r.problems.push({location:{offset:e.offset,length:e.length},message:C("maxLengthWarning","String is longer than the maximum length of {0}.",t.maxLength)}),"string"==typeof t.pattern&&(v(t.pattern).test(e.value)||r.problems.push({location:{offset:e.offset,length:e.length},message:t.patternErrorMessage||t.errorMessage||C("patternWarning",'String does not match the pattern of "{0}".',t.pattern)})),t.format)switch(t.format){case"uri":case"uri-reference":var s=void 0;if(e.value){var i=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/.exec(e.value);i?i[2]||"uri"!==t.format||(s=C("uriSchemeMissing","URI with a scheme is expected.")):s=C("uriMissing","URI is expected.")}else s=C("uriEmpty","URI expected.");s&&r.problems.push({location:{offset:e.offset,length:e.length},message:t.patternErrorMessage||t.errorMessage||C("uriFormatWarning","String is not a URI: {0}",s)});break;case"color-hex":case"date-time":case"date":case"time":case"email":var o=k[t.format];e.value&&o.pattern.exec(e.value)||r.problems.push({location:{offset:e.offset,length:e.length},message:t.patternErrorMessage||t.errorMessage||o.errorMessage})}}(i,t,r);break;case"number":!function(e,t,r,n){var s=e.value;function i(e){var t,r=/^(-?\d+)(?:\.(\d+))?(?:e([-+]\d+))?$/.exec(e.toString());return r&&{value:Number(r[1]+(r[2]||"")),multiplier:((null===(t=r[2])||void 0===t?void 0:t.length)||0)-(parseInt(r[3])||0)}}if(x(t.multipleOf)){var o=-1;if(Number.isInteger(t.multipleOf))o=s%t.multipleOf;else{var a=i(t.multipleOf),c=i(s);if(a&&c){var l=Math.pow(10,Math.abs(c.multiplier-a.multiplier));c.multiplier<a.multiplier?c.value*=l:a.value*=l,o=c.value%a.value}}0!==o&&r.problems.push({location:{offset:e.offset,length:e.length},message:C("multipleOfWarning","Value is not divisible by {0}.",t.multipleOf)})}function u(e,t){return x(t)?t:A(t)&&t?e:void 0}function h(e,t){if(!A(t)||!t)return e}var m=u(t.minimum,t.exclusiveMinimum);x(m)&&s<=m&&r.problems.push({location:{offset:e.offset,length:e.length},message:C("exclusiveMinimumWarning","Value is below the exclusive minimum of {0}.",m)});var f=u(t.maximum,t.exclusiveMaximum);x(f)&&s>=f&&r.problems.push({location:{offset:e.offset,length:e.length},message:C("exclusiveMaximumWarning","Value is above the exclusive maximum of {0}.",f)});var p=h(t.minimum,t.exclusiveMinimum);x(p)&&s<p&&r.problems.push({location:{offset:e.offset,length:e.length},message:C("minimumWarning","Value is below the minimum of {0}.",p)});var d=h(t.maximum,t.exclusiveMaximum);x(d)&&s>d&&r.problems.push({location:{offset:e.offset,length:e.length},message:C("maximumWarning","Value is above the maximum of {0}.",d)})}(i,t,r);break;case"property":return L(i.valueNode,t,r,n)}!function(){function e(e){return i.type===e||"integer"===e&&"number"===i.type&&i.isInteger}if(Array.isArray(t.type)?t.type.some(e)||r.problems.push({location:{offset:i.offset,length:i.length},message:t.errorMessage||C("typeArrayMismatchWarning","Incorrect type. Expected one of {0}.",t.type.join(", "))}):t.type&&(e(t.type)||r.problems.push({location:{offset:i.offset,length:i.length},message:t.errorMessage||C("typeMismatchWarning",'Incorrect type. Expected "{0}".',t.type)})),Array.isArray(t.allOf))for(var o=0,a=t.allOf;o<a.length;o++){var c=a[o];L(i,$(c),r,n)}var l=$(t.not);if(l){var u=new E,m=n.newSub();L(i,l,u,m),u.hasProblems()||r.problems.push({location:{offset:i.offset,length:i.length},message:C("notSchemaWarning","Matches a schema that is not allowed.")});for(var f=0,p=m.schemas;f<p.length;f++){var d=p[f];d.inverted=!d.inverted,n.add(d)}}var g=function(e,t){for(var s=[],o=void 0,a=0,c=e;a<c.length;a++){var l=$(c[a]),u=new E,h=n.newSub();if(L(i,l,u,h),u.hasProblems()||s.push(l),o)if(t||u.hasProblems()||o.validationResult.hasProblems()){var m=u.compare(o.validationResult);m>0?o={schema:l,validationResult:u,matchingSchemas:h}:0===m&&(o.matchingSchemas.merge(h),o.validationResult.mergeEnumValues(u))}else o.matchingSchemas.merge(h),o.validationResult.propertiesMatches+=u.propertiesMatches,o.validationResult.propertiesValueMatches+=u.propertiesValueMatches;else o={schema:l,validationResult:u,matchingSchemas:h}}return s.length>1&&t&&r.problems.push({location:{offset:i.offset,length:1},message:C("oneOfWarning","Matches multiple schemas when only one must validate.")}),o&&(r.merge(o.validationResult),r.propertiesMatches+=o.validationResult.propertiesMatches,r.propertiesValueMatches+=o.validationResult.propertiesValueMatches,n.merge(o.matchingSchemas)),s.length};Array.isArray(t.anyOf)&&g(t.anyOf,!1),Array.isArray(t.oneOf)&&g(t.oneOf,!0);var y,v,x,A,T,O,w=function(e){var t=new E,s=n.newSub();L(i,$(e),t,s),r.merge(t),r.propertiesMatches+=t.propertiesMatches,r.propertiesValueMatches+=t.propertiesValueMatches,n.merge(s)},M=$(t.if);if(M&&(y=M,v=$(t.then),x=$(t.else),A=$(y),T=new E,O=n.newSub(),L(i,A,T,O),n.merge(O),T.hasProblems()?x&&w(x):v&&w(v)),Array.isArray(t.enum)){for(var P=D(i),j=!1,V=0,k=t.enum;V<k.length;V++){if(b(P,k[V])){j=!0;break}}r.enumValues=t.enum,r.enumValueMatch=j,j||r.problems.push({location:{offset:i.offset,length:i.length},code:s.EnumValueMismatch,message:t.errorMessage||C("enumWarning","Value is not accepted. Valid values: {0}.",t.enum.map((function(e){return JSON.stringify(e)})).join(", "))})}S(t.const)&&(b(P=D(i),t.const)?r.enumValueMatch=!0:(r.problems.push({location:{offset:i.offset,length:i.length},code:s.EnumValueMismatch,message:t.errorMessage||C("constWarning","Value must be {0}.",JSON.stringify(t.const))}),r.enumValueMatch=!1),r.enumValues=[t.const]),t.deprecationMessage&&i.parent&&r.problems.push({location:{offset:i.parent.offset,length:i.parent.length},severity:h.H_.Warning,message:t.deprecationMessage,code:s.Deprecated})}(),n.add({node:i,schema:t})}}function U(e,t){if("string"!=typeof e)throw new TypeError("Expected a string");for(var r,n=String(e),s="",i=!!t&&!!t.extended,o=!!t&&!!t.globstar,a=!1,c=t&&"string"==typeof t.flags?t.flags:"",l=0,u=n.length;l<u;l++)switch(r=n[l]){case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":s+="\\"+r;break;case"?":if(i){s+=".";break}case"[":case"]":if(i){s+=r;break}case"{":if(i){a=!0,s+="(";break}case"}":if(i){a=!1,s+=")";break}case",":if(a){s+="|";break}s+="\\"+r;break;case"*":for(var h=n[l-1],m=1;"*"===n[l+1];)m++,l++;var f=n[l+1];o?!(m>1)||"/"!==h&&void 0!==h&&"{"!==h&&","!==h||"/"!==f&&void 0!==f&&","!==f&&"}"!==f?s+="([^/]*)":("/"===f?l++:"/"===h&&s.endsWith("\\/")&&(s=s.substr(0,s.length-2)),s+="((?:[^/]*(?:/|$))*)"):s+=".*";break;default:s+=r}return c&&~c.indexOf("g")||(s="^"+s+"$"),new RegExp(s,c)}!function(){function e(e,t,r){void 0===t&&(t=[]),void 0===r&&(r=[]),this.root=e,this.syntaxErrors=t,this.comments=r}e.prototype.getNodeFromOffset=function(e,t){if(void 0===t&&(t=!1),this.root)return l.Hk(this.root,e,t)},e.prototype.visit=function(e){if(this.root){var t=function(r){var n=e(r),s=r.children;if(Array.isArray(s))for(var i=0;i<s.length&&n;i++)n=t(s[i]);return n};t(this.root)}},e.prototype.validate=function(e,t,r){if(void 0===r&&(r=h.H_.Warning),this.root&&t){var n=new E;return L(this.root,t,n,N.instance),n.problems.map((function(t){var n,s=h.e6.create(e.positionAt(t.location.offset),e.positionAt(t.location.offset+t.location.length));return h.R9.create(s,t.message,null!==(n=t.severity)&&void 0!==n?n:r,t.code)}))}},e.prototype.getMatchingSchemas=function(e,t,r){void 0===t&&(t=-1);var n=new F(t,r);return this.root&&e&&L(this.root,e,new E,n),n.schemas}}();var _=O(),q=function(){function e(e,t){this.globWrappers=[];try{for(var r=0,n=e;r<n.length;r++){var s=n[r],i="!"!==s[0];i||(s=s.substring(1)),s.length>0&&("/"===s[0]&&(s=s.substring(1)),this.globWrappers.push({regexp:U("**/"+s,{extended:!0,globstar:!0}),include:i}))}this.uris=t}catch(e){this.globWrappers.length=0,this.uris=[]}}return e.prototype.matchesPattern=function(e){for(var t=!1,r=0,n=this.globWrappers;r<n.length;r++){var s=n[r],i=s.regexp,o=s.include;i.test(e)&&(t=o)}return t},e.prototype.getURIs=function(){return this.uris},e}(),H=function(){function e(e,t,r){this.service=e,this.url=t,this.dependencies={},r&&(this.unresolvedSchema=this.service.promise.resolve(new K(r)))}return e.prototype.getUnresolvedSchema=function(){return this.unresolvedSchema||(this.unresolvedSchema=this.service.loadSchema(this.url)),this.unresolvedSchema},e.prototype.getResolvedSchema=function(){var e=this;return this.resolvedSchema||(this.resolvedSchema=this.getUnresolvedSchema().then((function(t){return e.service.resolveSchemaContent(t,e.url,e.dependencies)}))),this.resolvedSchema},e.prototype.clearSchema=function(){this.resolvedSchema=void 0,this.unresolvedSchema=void 0,this.dependencies={}},e}(),K=function(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t},B=function(){function e(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t}return e.prototype.getSection=function(e){var t=this.getSectionRecursive(e,this.schema);if(t)return $(t)},e.prototype.getSectionRecursive=function(e,t){if(!t||"boolean"==typeof t||0===e.length)return t;var r=e.shift();if(t.properties&&(t.properties[r],1))return this.getSectionRecursive(e,t.properties[r]);if(t.patternProperties)for(var n=0,s=Object.keys(t.patternProperties);n<s.length;n++){var i=s[n];if(v(i).test(r))return this.getSectionRecursive(e,t.patternProperties[i])}else{if("object"==typeof t.additionalProperties)return this.getSectionRecursive(e,t.additionalProperties);if(r.match("[0-9]+"))if(Array.isArray(t.items)){var o=parseInt(r,10);if(!isNaN(o)&&t.items[o])return this.getSectionRecursive(e,t.items[o])}else if(t.items)return this.getSectionRecursive(e,t.items)}},e}(),G=function(){function e(e,t,r){this.contextService=t,this.requestService=e,this.promiseConstructor=r||Promise,this.callOnDispose=[],this.contributionSchemas={},this.contributionAssociations=[],this.schemasById={},this.filePatternAssociations=[],this.registeredSchemasIds={}}return e.prototype.getRegisteredSchemaIds=function(e){return Object.keys(this.registeredSchemasIds).filter((function(t){var r=u.o.parse(t).scheme;return"schemaservice"!==r&&(!e||e(r))}))},Object.defineProperty(e.prototype,"promise",{get:function(){return this.promiseConstructor},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){for(;this.callOnDispose.length>0;)this.callOnDispose.pop()()},e.prototype.onResourceChange=function(e){var t=this;this.cachedSchemaForResource=void 0;for(var r=!1,n=[e=Y(e)],s=Object.keys(this.schemasById).map((function(e){return t.schemasById[e]}));n.length;)for(var i=n.pop(),o=0;o<s.length;o++){var a=s[o];a&&(a.url===i||a.dependencies[i])&&(a.url!==i&&n.push(a.url),a.clearSchema(),s[o]=void 0,r=!0)}return r},e.prototype.setSchemaContributions=function(e){if(e.schemas){var t=e.schemas;for(var r in t){var n=Y(r);this.contributionSchemas[n]=this.addSchemaHandle(n,t[r])}}if(Array.isArray(e.schemaAssociations))for(var s=0,i=e.schemaAssociations;s<i.length;s++){var o=i[s],a=o.uris.map(Y),c=this.addFilePatternAssociation(o.pattern,a);this.contributionAssociations.push(c)}},e.prototype.addSchemaHandle=function(e,t){var r=new H(this,e,t);return this.schemasById[e]=r,r},e.prototype.getOrAddSchemaHandle=function(e,t){return this.schemasById[e]||this.addSchemaHandle(e,t)},e.prototype.addFilePatternAssociation=function(e,t){var r=new q(e,t);return this.filePatternAssociations.push(r),r},e.prototype.registerExternalSchema=function(e,t,r){var n=Y(e);return this.registeredSchemasIds[n]=!0,this.cachedSchemaForResource=void 0,t&&this.addFilePatternAssociation(t,[e]),r?this.addSchemaHandle(n,r):this.getOrAddSchemaHandle(n)},e.prototype.clearExternalSchemas=function(){for(var e in this.schemasById={},this.filePatternAssociations=[],this.registeredSchemasIds={},this.cachedSchemaForResource=void 0,this.contributionSchemas)this.schemasById[e]=this.contributionSchemas[e],this.registeredSchemasIds[e]=!0;for(var t=0,r=this.contributionAssociations;t<r.length;t++){var n=r[t];this.filePatternAssociations.push(n)}},e.prototype.getResolvedSchema=function(e){var t=Y(e),r=this.schemasById[t];return r?r.getResolvedSchema():this.promise.resolve(void 0)},e.prototype.loadSchema=function(e){if(!this.requestService){var t=_("json.schema.norequestservice","Unable to load schema from '{0}'. No schema request service available",z(e));return this.promise.resolve(new K({},[t]))}return this.requestService(e).then((function(t){if(!t){var r=_("json.schema.nocontent","Unable to load schema from '{0}': No content.",z(e));return new K({},[r])}var n,s=[];n=l.Qc(t,s);var i=s.length?[_("json.schema.invalidFormat","Unable to parse content from '{0}': Parse error at offset {1}.",z(e),s[0].offset)]:[];return new K(n,i)}),(function(t){var r=t.toString(),n=t.toString().split("Error: ");return n.length>1&&(r=n[1]),y(r,".")&&(r=r.substr(0,r.length-1)),new K({},[_("json.schema.nocontent","Unable to load schema from '{0}': {1}.",z(e),r)])}))},e.prototype.resolveSchemaContent=function(e,t,r){var n=this,s=e.errors.slice(0),i=e.schema;if(i.$schema){var o=Y(i.$schema);if("http://json-schema.org/draft-03/schema"===o)return this.promise.resolve(new B({},[_("json.schema.draft03.notsupported","Draft-03 schemas are not supported.")]));"https://json-schema.org/draft/2019-09/schema"===o&&s.push(_("json.schema.draft201909.notsupported","Draft 2019-09 schemas are not yet fully supported."))}var a=this.contextService,c=function(e,t,r,n){var i=n?decodeURIComponent(n):void 0,o=function(e,t){if(!t)return e;var r=e;return"/"===t[0]&&(t=t.substr(1)),t.split("/").some((function(e){return e=e.replace(/~1/g,"/").replace(/~0/g,"~"),!(r=r[e])})),r}(t,i);if(o)for(var a in o)o.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(e[a]=o[a]);else s.push(_("json.schema.invalidref","$ref '{0}' in '{1}' can not be resolved.",i,r))},l=function(e,t,r,i,o){a&&!/^[A-Za-z][A-Za-z0-9+\-.+]*:\/\/.*/.test(t)&&(t=a.resolveRelativePath(t,i)),t=Y(t);var l=n.getOrAddSchemaHandle(t);return l.getUnresolvedSchema().then((function(n){if(o[t]=!0,n.errors.length){var i=r?t+"#"+r:t;s.push(_("json.schema.problemloadingref","Problems loading reference '{0}': {1}",i,n.errors[0]))}return c(e,n.schema,t,r),u(e,n.schema,t,l.dependencies)}))},u=function(e,t,r,s){if(!e||"object"!=typeof e)return Promise.resolve(null);for(var i=[e],o=[],a=[],u=function(e){for(var n=[];e.$ref;){var o=e.$ref,u=o.split("#",2);if(delete e.$ref,u[0].length>0)return void a.push(l(e,u[0],u[1],r,s));-1===n.indexOf(o)&&(c(e,t,r,u[1]),n.push(o))}!function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e;r<n.length;r++){var s=n[r];"object"==typeof s&&i.push(s)}}(e.items,e.additionalItems,e.additionalProperties,e.not,e.contains,e.propertyNames,e.if,e.then,e.else),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e;r<n.length;r++){var s=n[r];if("object"==typeof s)for(var o in s){var a=s[o];"object"==typeof a&&i.push(a)}}}(e.definitions,e.properties,e.patternProperties,e.dependencies),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e;r<n.length;r++){var s=n[r];if(Array.isArray(s))for(var o=0,a=s;o<a.length;o++){var c=a[o];"object"==typeof c&&i.push(c)}}}(e.anyOf,e.allOf,e.oneOf,e.items)};i.length;){var h=i.pop();o.indexOf(h)>=0||(o.push(h),u(h))}return n.promise.all(a)};return u(i,i,t,r).then((function(e){return new B(i,s)}))},e.prototype.getSchemaForResource=function(e,t){if(t&&t.root&&"object"===t.root.type){var r=t.root.properties.filter((function(e){return"$schema"===e.keyNode.value&&e.valueNode&&"string"===e.valueNode.type}));if(r.length>0){var n=r[0].valueNode;if(n&&"string"===n.type){var s=D(n);if(s&&g(s,".")&&this.contextService&&(s=this.contextService.resolveRelativePath(s,e)),s){var i=Y(s);return this.getOrAddSchemaHandle(i).getResolvedSchema()}}}}if(this.cachedSchemaForResource&&this.cachedSchemaForResource.resource===e)return this.cachedSchemaForResource.resolvedSchema;for(var o=Object.create(null),a=[],c=function(e){try{return u.o.parse(e).with({fragment:null,query:null}).toString()}catch(t){return e}}(e),l=0,h=this.filePatternAssociations;l<h.length;l++){var m=h[l];if(m.matchesPattern(c))for(var f=0,p=m.getURIs();f<p.length;f++){var d=p[f];o[d]||(a.push(d),o[d]=!0)}}var y=a.length>0?this.createCombinedSchema(e,a).getResolvedSchema():this.promise.resolve(void 0);return this.cachedSchemaForResource={resource:e,resolvedSchema:y},y},e.prototype.createCombinedSchema=function(e,t){if(1===t.length)return this.getOrAddSchemaHandle(t[0]);var r="schemaservice://combinedSchema/"+encodeURIComponent(e),n={allOf:t.map((function(e){return{$ref:e}}))};return this.addSchemaHandle(r,n)},e.prototype.getMatchingSchemas=function(e,t,r){if(r){var n=r.id||"schemaservice://untitled/matchingSchemas/"+J++;return this.resolveSchemaContent(new K(r),n,{}).then((function(e){return t.getMatchingSchemas(e.schema).filter((function(e){return!e.inverted}))}))}return this.getSchemaForResource(e.uri,t).then((function(e){return e?t.getMatchingSchemas(e.schema).filter((function(e){return!e.inverted})):[]}))},e}(),J=0;function Y(e){try{return u.o.parse(e).toString()}catch(t){return e}}function z(e){try{var t=u.o.parse(e);if("file"===t.scheme)return t.fsPath}catch(e){}return e}function Z(e){try{return new RegExp(e,"u")}catch(t){return new RegExp(e)}}function X(e,t){for(let r=++t;r<e.length;r++){const n=e.charAt(r);if(" "!==n&&"\t"!==n)return t;t++}return t}function Q(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;let r,n;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(!Q(e[r],t[r]))return!1}else{const s=[];for(n in e)s.push(n);s.sort();const i=[];for(n in t)i.push(n);if(i.sort(),!Q(s,i))return!1;for(r=0;r<s.length;r++)if(!Q(e[s[r]],t[s[r]]))return!1}return!0}function ee(e){return"number"==typeof e}function te(e){return void 0!==e}function re(e){return"boolean"==typeof e}function ne(e){return"string"==typeof e}function se(e){var t;return e?e instanceof Error&&null!==(t=e.stack)&&void 0!==t?t:e.toString():"null"}function ie(e){return e.title?e.title:e.$id?oe(e.$id):e.$ref||e._$ref?oe(e.$ref||e._$ref):e.closestTitle||(Array.isArray(e.type)?e.type.join(" | "):e.type)}function oe(e){const t=e.match(/^(?:.*\/)?(.*?)(?:\.schema\.json)?$/);let r=!!t&&t[1];return r||(r="typeNotFound",console.error(`$ref (${e}) not parsed properly`)),r}function ae(e,t,r){if(null!==e&&"object"==typeof e){var n=t+"\t";if(Array.isArray(e)){if(0===e.length)return"[]";for(var s="[\n",i=0;i<e.length;i++)s+=n+ae(e[i],n,r),i<e.length-1&&(s+=","),s+="\n";return s+(t+"]")}var o=Object.keys(e);if(0===o.length)return"{}";for(s="{\n",i=0;i<o.length;i++){var a=o[i];s+=n+JSON.stringify(a)+": "+ae(e[a],n,r),i<o.length-1&&(s+=","),s+="\n"}return s+(t+"}")}return r(e)}var ce=O();!function(){function e(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=Promise),void 0===n&&(n={}),this.schemaService=e,this.contributions=t,this.promiseConstructor=r,this.clientCapabilities=n}e.prototype.doResolve=function(e){for(var t=this.contributions.length-1;t>=0;t--){var r=this.contributions[t].resolveCompletion;if(r){var n=r(e);if(n)return n}}return this.promiseConstructor.resolve(e)},e.prototype.doComplete=function(e,t,r){var n=this,s={items:[],isIncomplete:!1},i=e.getText(),o=e.offsetAt(t),a=r.getNodeFromOffset(o,!0);if(this.isInComment(e,a?a.offset:0,o))return Promise.resolve(s);if(a&&o===a.offset+a.length&&o>0){var c=i[o-1];("object"===a.type&&"}"===c||"array"===a.type&&"]"===c)&&(a=a.parent)}var l,u=this.getCurrentWord(e,o);if(!a||"string"!==a.type&&"number"!==a.type&&"boolean"!==a.type&&"null"!==a.type){var m=o-u.length;m>0&&'"'===i[m-1]&&m--,l=h.e6.create(e.positionAt(m),t)}else l=h.e6.create(e.positionAt(a.offset),e.positionAt(a.offset+a.length));var f={},p={add:function(e){var t=e.label,r=f[t];if(r)r.documentation||(r.documentation=e.documentation),r.detail||(r.detail=e.detail);else{if((t=t.replace(/[\n]/g,"↵")).length>60){var n=t.substr(0,57).trim()+"...";f[n]||(t=n)}l&&void 0!==e.insertText&&(e.textEdit=h.PY.replace(l,e.insertText)),e.label=t,f[t]=e,s.items.push(e)}},setAsIncomplete:function(){s.isIncomplete=!0},error:function(e){console.error(e)},log:function(e){console.log(e)},getNumberOfProposals:function(){return s.items.length}};return this.schemaService.getSchemaForResource(e.uri,r).then((function(t){var c=[],m=!0,d="",g=void 0;if(a&&"string"===a.type){var y=a.parent;y&&"property"===y.type&&y.keyNode===a&&(m=!y.valueNode,g=y,d=i.substr(a.offset+1,a.length-2),y&&(a=y.parent))}if(a&&"object"===a.type){if(a.offset===o)return s;a.properties.forEach((function(e){g&&g===e||(f[e.keyNode.value]=h.FG.create("__"))}));var v="";m&&(v=n.evaluateSeparatorAfter(e,e.offsetAt(l.end))),t?n.getPropertyCompletions(t,r,a,m,v,p):n.getSchemaLessPropertyCompletions(r,a,d,p);var b=R(a);n.contributions.forEach((function(t){var r=t.collectPropertyCompletions(e.uri,b,u,m,""===v,p);r&&c.push(r)})),!t&&u.length>0&&'"'!==i.charAt(o-u.length-1)&&(p.add({kind:h.cm.Property,label:n.getLabelForValue(u),insertText:n.getInsertTextForProperty(u,void 0,!1,v),insertTextFormat:h.lO.Snippet,documentation:""}),p.setAsIncomplete())}var x={};return t?n.getValueCompletions(t,r,a,o,e,p,x):n.getSchemaLessValueCompletions(r,a,o,e,p),n.contributions.length>0&&n.getContributedValueCompletions(r,a,o,e,p,c),n.promiseConstructor.all(c).then((function(){if(0===p.getNumberOfProposals()){var t=o;!a||"string"!==a.type&&"number"!==a.type&&"boolean"!==a.type&&"null"!==a.type||(t=a.offset+a.length);var r=n.evaluateSeparatorAfter(e,t);n.addFillerValueCompletions(x,r,p)}return s}))}))},e.prototype.getPropertyCompletions=function(e,t,r,n,s,i){var o=this;t.getMatchingSchemas(e.schema,r.offset).forEach((function(e){if(e.node===r&&!e.inverted){var t=e.schema.properties;t&&Object.keys(t).forEach((function(e){var r=t[e];if("object"==typeof r&&!r.deprecationMessage&&!r.doNotSuggest){var a={kind:h.cm.Property,label:e,insertText:o.getInsertTextForProperty(e,r,n,s),insertTextFormat:h.lO.Snippet,filterText:o.getFilterTextForValue(e),documentation:o.fromMarkup(r.markdownDescription)||r.description||""};void 0!==r.suggestSortText&&(a.sortText=r.suggestSortText),a.insertText&&y(a.insertText,"$1"+s)&&(a.command={title:"Suggest",command:"editor.action.triggerSuggest"}),i.add(a)}}));var a=e.schema.propertyNames;if("object"==typeof a&&!a.deprecationMessage&&!a.doNotSuggest){var c=function(e,t){void 0===t&&(t=void 0);var r={kind:h.cm.Property,label:e,insertText:o.getInsertTextForProperty(e,void 0,n,s),insertTextFormat:h.lO.Snippet,filterText:o.getFilterTextForValue(e),documentation:t||o.fromMarkup(a.markdownDescription)||a.description||""};void 0!==a.suggestSortText&&(r.sortText=a.suggestSortText),r.insertText&&y(r.insertText,"$1"+s)&&(r.command={title:"Suggest",command:"editor.action.triggerSuggest"}),i.add(r)};if(a.enum)for(var l=0;l<a.enum.length;l++){var u=void 0;a.markdownEnumDescriptions&&l<a.markdownEnumDescriptions.length?u=o.fromMarkup(a.markdownEnumDescriptions[l]):a.enumDescriptions&&l<a.enumDescriptions.length&&(u=a.enumDescriptions[l]),c(a.enum[l],u)}a.const&&c(a.const)}}}))},e.prototype.getSchemaLessPropertyCompletions=function(e,t,r,n){var s=this,i=function(e){e.properties.forEach((function(e){var t=e.keyNode.value;n.add({kind:h.cm.Property,label:t,insertText:s.getInsertTextForValue(t,""),insertTextFormat:h.lO.Snippet,filterText:s.getFilterTextForValue(t),documentation:""})}))};if(t.parent)if("property"===t.parent.type){var o=t.parent.keyNode.value;e.visit((function(e){return"property"===e.type&&e!==t.parent&&e.keyNode.value===o&&e.valueNode&&"object"===e.valueNode.type&&i(e.valueNode),!0}))}else"array"===t.parent.type&&t.parent.items.forEach((function(e){"object"===e.type&&e!==t&&i(e)}));else"object"===t.type&&n.add({kind:h.cm.Property,label:"$schema",insertText:this.getInsertTextForProperty("$schema",void 0,!0,""),insertTextFormat:h.lO.Snippet,documentation:"",filterText:this.getFilterTextForValue("$schema")})},e.prototype.getSchemaLessValueCompletions=function(e,t,r,n,s){var i=this,o=r;if(!t||"string"!==t.type&&"number"!==t.type&&"boolean"!==t.type&&"null"!==t.type||(o=t.offset+t.length,t=t.parent),!t)return s.add({kind:this.getSuggestionKind("object"),label:"Empty object",insertText:this.getInsertTextForValue({},""),insertTextFormat:h.lO.Snippet,documentation:""}),void s.add({kind:this.getSuggestionKind("array"),label:"Empty array",insertText:this.getInsertTextForValue([],""),insertTextFormat:h.lO.Snippet,documentation:""});var a=this.evaluateSeparatorAfter(n,o),c=function(e){e.parent&&!W(e.parent,r,!0)&&s.add({kind:i.getSuggestionKind(e.type),label:i.getLabelTextForMatchingNode(e,n),insertText:i.getInsertTextForMatchingNode(e,n,a),insertTextFormat:h.lO.Snippet,documentation:""}),"boolean"===e.type&&i.addBooleanValueCompletion(!e.value,a,s)};if("property"===t.type&&r>(t.colonOffset||0)){var l=t.valueNode;if(l&&(r>l.offset+l.length||"object"===l.type||"array"===l.type))return;var u=t.keyNode.value;e.visit((function(e){return"property"===e.type&&e.keyNode.value===u&&e.valueNode&&c(e.valueNode),!0})),"$schema"===u&&t.parent&&!t.parent.parent&&this.addDollarSchemaCompletions(a,s)}if("array"===t.type)if(t.parent&&"property"===t.parent.type){var m=t.parent.keyNode.value;e.visit((function(e){return"property"===e.type&&e.keyNode.value===m&&e.valueNode&&"array"===e.valueNode.type&&e.valueNode.items.forEach(c),!0}))}else t.items.forEach(c)},e.prototype.getValueCompletions=function(e,t,r,n,s,i,o){var a=n,c=void 0,l=void 0;if(!r||"string"!==r.type&&"number"!==r.type&&"boolean"!==r.type&&"null"!==r.type||(a=r.offset+r.length,l=r,r=r.parent),r){if("property"===r.type&&n>(r.colonOffset||0)){var u=r.valueNode;if(u&&n>u.offset+u.length)return;c=r.keyNode.value,r=r.parent}if(r&&(void 0!==c||"array"===r.type)){for(var h=this.evaluateSeparatorAfter(s,a),m=0,f=t.getMatchingSchemas(e.schema,r.offset,l);m<f.length;m++){var p=f[m];if(p.node===r&&!p.inverted&&p.schema){if("array"===r.type&&p.schema.items)if(Array.isArray(p.schema.items)){var d=this.findItemAtOffset(r,s,n);d<p.schema.items.length&&this.addSchemaValueCompletions(p.schema.items[d],h,i,o)}else this.addSchemaValueCompletions(p.schema.items,h,i,o);if(void 0!==c){var g=!1;if(p.schema.properties&&(S=p.schema.properties[c])&&(g=!0,this.addSchemaValueCompletions(S,h,i,o)),p.schema.patternProperties&&!g)for(var y=0,b=Object.keys(p.schema.patternProperties);y<b.length;y++){var x=b[y];if(v(x).test(c)){g=!0;var S=p.schema.patternProperties[x];this.addSchemaValueCompletions(S,h,i,o)}}p.schema.additionalProperties&&!g&&(S=p.schema.additionalProperties,this.addSchemaValueCompletions(S,h,i,o))}}}"$schema"!==c||r.parent||this.addDollarSchemaCompletions(h,i),o.boolean&&(this.addBooleanValueCompletion(!0,h,i),this.addBooleanValueCompletion(!1,h,i)),o.null&&this.addNullValueCompletion(h,i)}}else this.addSchemaValueCompletions(e.schema,"",i,o)},e.prototype.getContributedValueCompletions=function(e,t,r,n,s,i){if(t){if("string"!==t.type&&"number"!==t.type&&"boolean"!==t.type&&"null"!==t.type||(t=t.parent),t&&"property"===t.type&&r>(t.colonOffset||0)){var o=t.keyNode.value,a=t.valueNode;if((!a||r<=a.offset+a.length)&&t.parent){var c=R(t.parent);this.contributions.forEach((function(e){var t=e.collectValueCompletions(n.uri,c,o,s);t&&i.push(t)}))}}}else this.contributions.forEach((function(e){var t=e.collectDefaultCompletions(n.uri,s);t&&i.push(t)}))},e.prototype.addSchemaValueCompletions=function(e,t,r,n){var s=this;"object"==typeof e&&(this.addEnumValueCompletions(e,t,r),this.addDefaultValueCompletions(e,t,r),this.collectTypes(e,n),Array.isArray(e.allOf)&&e.allOf.forEach((function(e){return s.addSchemaValueCompletions(e,t,r,n)})),Array.isArray(e.anyOf)&&e.anyOf.forEach((function(e){return s.addSchemaValueCompletions(e,t,r,n)})),Array.isArray(e.oneOf)&&e.oneOf.forEach((function(e){return s.addSchemaValueCompletions(e,t,r,n)})))},e.prototype.addDefaultValueCompletions=function(e,t,r,n){var s=this;void 0===n&&(n=0);var i=!1;if(S(e.default)){for(var o=e.type,a=e.default,c=n;c>0;c--)a=[a],o="array";r.add({kind:this.getSuggestionKind(o),label:this.getLabelForValue(a),insertText:this.getInsertTextForValue(a,t),insertTextFormat:h.lO.Snippet,detail:ce("json.suggest.default","Default value")}),i=!0}Array.isArray(e.examples)&&e.examples.forEach((function(o){for(var a=e.type,c=o,l=n;l>0;l--)c=[c],a="array";r.add({kind:s.getSuggestionKind(a),label:s.getLabelForValue(c),insertText:s.getInsertTextForValue(c,t),insertTextFormat:h.lO.Snippet}),i=!0})),Array.isArray(e.defaultSnippets)&&e.defaultSnippets.forEach((function(o){var a,c,l=e.type,u=o.body,m=o.label;if(S(u)){e.type;for(var f=n;f>0;f--)u=[u];a=s.getInsertTextForSnippetValue(u,t),c=s.getFilterTextForSnippetValue(u),m=m||s.getLabelForSnippetValue(u)}else{if("string"!=typeof o.bodyText)return;var p="",d="",g="";for(f=n;f>0;f--)p=p+g+"[\n",d=d+"\n"+g+"]",g+="\t",l="array";a=p+g+o.bodyText.split("\n").join("\n"+g)+d+t,m=m||a,c=a.replace(/[\n]/g,"")}r.add({kind:s.getSuggestionKind(l),label:m,documentation:s.fromMarkup(o.markdownDescription)||o.description,insertText:a,insertTextFormat:h.lO.Snippet,filterText:c}),i=!0})),!i&&"object"==typeof e.items&&!Array.isArray(e.items)&&n<5&&this.addDefaultValueCompletions(e.items,t,r,n+1)},e.prototype.addEnumValueCompletions=function(e,t,r){if(S(e.const)&&r.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(e.const),insertText:this.getInsertTextForValue(e.const,t),insertTextFormat:h.lO.Snippet,documentation:this.fromMarkup(e.markdownDescription)||e.description}),Array.isArray(e.enum))for(var n=0,s=e.enum.length;n<s;n++){var i=e.enum[n],o=this.fromMarkup(e.markdownDescription)||e.description;e.markdownEnumDescriptions&&n<e.markdownEnumDescriptions.length&&this.doesSupportMarkdown()?o=this.fromMarkup(e.markdownEnumDescriptions[n]):e.enumDescriptions&&n<e.enumDescriptions.length&&(o=e.enumDescriptions[n]),r.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(i),insertText:this.getInsertTextForValue(i,t),insertTextFormat:h.lO.Snippet,documentation:o})}},e.prototype.collectTypes=function(e,t){if(!Array.isArray(e.enum)&&!S(e.const)){var r=e.type;Array.isArray(r)?r.forEach((function(e){return t[e]=!0})):r&&(t[r]=!0)}},e.prototype.addFillerValueCompletions=function(e,t,r){e.object&&r.add({kind:this.getSuggestionKind("object"),label:"{}",insertText:this.getInsertTextForGuessedValue({},t),insertTextFormat:h.lO.Snippet,detail:ce("defaults.object","New object"),documentation:""}),e.array&&r.add({kind:this.getSuggestionKind("array"),label:"[]",insertText:this.getInsertTextForGuessedValue([],t),insertTextFormat:h.lO.Snippet,detail:ce("defaults.array","New array"),documentation:""})},e.prototype.addBooleanValueCompletion=function(e,t,r){r.add({kind:this.getSuggestionKind("boolean"),label:e?"true":"false",insertText:this.getInsertTextForValue(e,t),insertTextFormat:h.lO.Snippet,documentation:""})},e.prototype.addNullValueCompletion=function(e,t){t.add({kind:this.getSuggestionKind("null"),label:"null",insertText:"null"+e,insertTextFormat:h.lO.Snippet,documentation:""})},e.prototype.addDollarSchemaCompletions=function(e,t){var r=this,n=this.schemaService.getRegisteredSchemaIds((function(e){return"http"===e||"https"===e}));n.forEach((function(n){return t.add({kind:h.cm.Module,label:r.getLabelForValue(n),filterText:r.getFilterTextForValue(n),insertText:r.getInsertTextForValue(n,e),insertTextFormat:h.lO.Snippet,documentation:""})}))},e.prototype.getLabelForValue=function(e){return JSON.stringify(e)},e.prototype.getFilterTextForValue=function(e){return JSON.stringify(e)},e.prototype.getFilterTextForSnippetValue=function(e){return JSON.stringify(e).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")},e.prototype.getLabelForSnippetValue=function(e){return JSON.stringify(e).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")},e.prototype.getInsertTextForPlainText=function(e){return e.replace(/[\\\$\}]/g,"\\$&")},e.prototype.getInsertTextForValue=function(e,t){var r=JSON.stringify(e,null,"\t");return"{}"===r?"{$1}"+t:"[]"===r?"[$1]"+t:this.getInsertTextForPlainText(r+t)},e.prototype.getInsertTextForSnippetValue=function(e,t){return ae(e,"",(function(e){return"string"==typeof e&&"^"===e[0]?e.substr(1):JSON.stringify(e)}))+t},e.prototype.getInsertTextForGuessedValue=function(e,t){switch(typeof e){case"object":return null===e?"${1:null}"+t:this.getInsertTextForValue(e,t);case"string":var r=JSON.stringify(e);return r=r.substr(1,r.length-2),'"${1:'+(r=this.getInsertTextForPlainText(r))+'}"'+t;case"number":case"boolean":return"${1:"+JSON.stringify(e)+"}"+t}return this.getInsertTextForValue(e,t)},e.prototype.getSuggestionKind=function(e){if(Array.isArray(e)){var t=e;e=t.length>0?t[0]:void 0}if(!e)return h.cm.Value;switch(e){case"string":default:return h.cm.Value;case"object":return h.cm.Module;case"property":return h.cm.Property}},e.prototype.getLabelTextForMatchingNode=function(e,t){switch(e.type){case"array":return"[]";case"object":return"{}";default:return t.getText().substr(e.offset,e.length)}},e.prototype.getInsertTextForMatchingNode=function(e,t,r){switch(e.type){case"array":return this.getInsertTextForValue([],r);case"object":return this.getInsertTextForValue({},r);default:var n=t.getText().substr(e.offset,e.length)+r;return this.getInsertTextForPlainText(n)}},e.prototype.getInsertTextForProperty=function(e,t,r,n){var s=this.getInsertTextForValue(e,"");if(!r)return s;var i,o=s+": ",a=0;if(t){if(Array.isArray(t.defaultSnippets)){if(1===t.defaultSnippets.length){var c=t.defaultSnippets[0].body;S(c)&&(i=this.getInsertTextForSnippetValue(c,""))}a+=t.defaultSnippets.length}if(t.enum&&(i||1!==t.enum.length||(i=this.getInsertTextForGuessedValue(t.enum[0],"")),a+=t.enum.length),S(t.default)&&(i||(i=this.getInsertTextForGuessedValue(t.default,"")),a++),Array.isArray(t.examples)&&t.examples.length&&(i||(i=this.getInsertTextForGuessedValue(t.examples[0],"")),a+=t.examples.length),0===a){var l=Array.isArray(t.type)?t.type[0]:t.type;switch(l||(t.properties?l="object":t.items&&(l="array")),l){case"boolean":i="$1";break;case"string":i='"$1"';break;case"object":i="{$1}";break;case"array":i="[$1]";break;case"number":case"integer":i="${1:0}";break;case"null":i="${1:null}";break;default:return s}}}return(!i||a>1)&&(i="$1"),o+i+n},e.prototype.getCurrentWord=function(e,t){for(var r=t-1,n=e.getText();r>=0&&-1===' \t\n\r\v":{[,]}'.indexOf(n.charAt(r));)r--;return n.substring(r+1,t)},e.prototype.evaluateSeparatorAfter=function(e,t){var r=l.tU(e.getText(),!0);switch(r.setPosition(t),r.scan()){case 5:case 2:case 4:case 17:return"";default:return","}},e.prototype.findItemAtOffset=function(e,t,r){for(var n=l.tU(t.getText(),!0),s=e.items,i=s.length-1;i>=0;i--){var o=s[i];if(r>o.offset+o.length)return n.setPosition(o.offset+o.length),5===n.scan()&&r>=n.getTokenOffset()+n.getTokenLength()?i+1:i;if(r>=o.offset)return i}return 0},e.prototype.isInComment=function(e,t,r){var n=l.tU(e.getText(),!1);n.setPosition(t);for(var s=n.scan();17!==s&&n.getTokenOffset()+n.getTokenLength()<r;)s=n.scan();return(12===s||13===s)&&n.getTokenOffset()<=r},e.prototype.fromMarkup=function(e){if(e&&this.doesSupportMarkdown())return{kind:h.a4.Markdown,value:e}},e.prototype.doesSupportMarkdown=function(){if(!S(this.supportsMarkdown)){var e=this.clientCapabilities.textDocument&&this.clientCapabilities.textDocument.completion;this.supportsMarkdown=e&&e.completionItem&&Array.isArray(e.completionItem.documentationFormat)&&-1!==e.completionItem.documentationFormat.indexOf(h.a4.Markdown)}return this.supportsMarkdown},e.prototype.doesSupportsCommitCharacters=function(){if(!S(this.supportsCommitCharacters)){var e=this.clientCapabilities.textDocument&&this.clientCapabilities.textDocument.completion;this.supportsCommitCharacters=e&&e.completionItem&&!!e.completionItem.commitCharactersSupport}return this.supportsCommitCharacters}}();var le=O(),ue=function(){function e(e,t){this.jsonSchemaService=e,this.promise=t,this.validationEnabled=!0}return e.prototype.configure=function(e){e&&(this.validationEnabled=!1!==e.validate,this.commentSeverity=e.allowComments?void 0:h.H_.Error)},e.prototype.doValidation=function(e,t,r,n){var i=this;if(!this.validationEnabled)return this.promise.resolve([]);var o=[],a={},c=function(e){var t=e.range.start.line+" "+e.range.start.character+" "+e.message;a[t]||(a[t]=!0,o.push(e))},l=function(n){var a=(null==r?void 0:r.trailingCommas)?pe(r.trailingCommas):h.H_.Error,l=(null==r?void 0:r.comments)?pe(r.comments):i.commentSeverity,u=(null==r?void 0:r.schemaValidation)?pe(r.schemaValidation):h.H_.Warning,m=(null==r?void 0:r.schemaRequest)?pe(r.schemaRequest):h.H_.Warning;if(n){if(n.errors.length&&t.root&&m){var f=t.root,p="object"===f.type?f.properties[0]:void 0;if(p&&"$schema"===p.keyNode.value){var d=p.valueNode||p,g=h.e6.create(e.positionAt(d.offset),e.positionAt(d.offset+d.length));c(h.R9.create(g,n.errors[0],m,s.SchemaResolveError))}else g=h.e6.create(e.positionAt(f.offset),e.positionAt(f.offset+1)),c(h.R9.create(g,n.errors[0],m,s.SchemaResolveError))}else if(u){var y=t.validate(e,n.schema,u);y&&y.forEach(c)}me(n.schema)&&(l=void 0),fe(n.schema)&&(a=void 0)}for(var v=0,b=t.syntaxErrors;v<b.length;v++){var x=b[v];if(x.code===s.TrailingComma){if("number"!=typeof a)continue;x.severity=a}c(x)}if("number"==typeof l){var S=le("InvalidCommentToken","Comments are not permitted in JSON.");t.comments.forEach((function(e){c(h.R9.create(e,S,l,s.CommentNotPermitted))}))}return o};if(n){var u=n.id||"schemaservice://untitled/"+he++;return this.jsonSchemaService.resolveSchemaContent(new K(n),u,{}).then((function(e){return l(e)}))}return this.jsonSchemaService.getSchemaForResource(e.uri,t).then((function(e){return l(e)}))},e}(),he=0;function me(e){if(e&&"object"==typeof e){if(A(e.allowComments))return e.allowComments;if(e.allOf)for(var t=0,r=e.allOf;t<r.length;t++){var n=me(r[t]);if(A(n))return n}}}function fe(e){if(e&&"object"==typeof e){if(A(e.allowTrailingCommas))return e.allowTrailingCommas;var t=e;if(A(t.allowsTrailingCommas))return t.allowsTrailingCommas;if(e.allOf)for(var r=0,n=e.allOf;r<n.length;r++){var s=fe(n[r]);if(A(s))return s}}}function pe(e){switch(e){case"error":return h.H_.Error;case"warning":return h.H_.Warning;case"ignore":return}}function de(e){return e<48?0:e<=57?e-48:(e<97&&(e+=32),e>=97&&e<=102?e-97+10:0)}function ge(e){if("#"===e[0])switch(e.length){case 4:return{red:17*de(e.charCodeAt(1))/255,green:17*de(e.charCodeAt(2))/255,blue:17*de(e.charCodeAt(3))/255,alpha:1};case 5:return{red:17*de(e.charCodeAt(1))/255,green:17*de(e.charCodeAt(2))/255,blue:17*de(e.charCodeAt(3))/255,alpha:17*de(e.charCodeAt(4))/255};case 7:return{red:(16*de(e.charCodeAt(1))+de(e.charCodeAt(2)))/255,green:(16*de(e.charCodeAt(3))+de(e.charCodeAt(4)))/255,blue:(16*de(e.charCodeAt(5))+de(e.charCodeAt(6)))/255,alpha:1};case 9:return{red:(16*de(e.charCodeAt(1))+de(e.charCodeAt(2)))/255,green:(16*de(e.charCodeAt(3))+de(e.charCodeAt(4)))/255,blue:(16*de(e.charCodeAt(5))+de(e.charCodeAt(6)))/255,alpha:(16*de(e.charCodeAt(7))+de(e.charCodeAt(8)))/255}}}var ye=function(){function e(e){this.schemaService=e}return e.prototype.findDocumentSymbols=function(e,t,r){var n=this;void 0===r&&(r={resultLimit:Number.MAX_VALUE});var s=t.root;if(!s)return[];var i=r.resultLimit||Number.MAX_VALUE,o=e.uri;if(("vscode://defaultsettings/keybindings.json"===o||y(o.toLowerCase(),"/user/keybindings.json"))&&"array"===s.type){for(var a=[],c=0,l=s.items;c<l.length;c++){var u=l[c];if("object"===u.type)for(var m=0,f=u.properties;m<f.length;m++){var p=f[m];if("key"===p.keyNode.value&&p.valueNode){var d=h.Ye.create(e.uri,ve(e,u));if(a.push({name:D(p.valueNode),kind:h.cR.Function,location:d}),--i<=0)return r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(o),a}}}return a}for(var g=[{node:s,containerName:""}],v=0,b=!1,x=[],S=function(t,r){"array"===t.type?t.items.forEach((function(e){e&&g.push({node:e,containerName:r})})):"object"===t.type&&t.properties.forEach((function(t){var s=t.valueNode;if(s)if(i>0){i--;var o=h.Ye.create(e.uri,ve(e,t)),a=r?r+"."+t.keyNode.value:t.keyNode.value;x.push({name:n.getKeyLabel(t),kind:n.getSymbolKind(s.type),location:o,containerName:r}),g.push({node:s,containerName:a})}else b=!0}))};v<g.length;){var A=g[v++];S(A.node,A.containerName)}return b&&r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(o),x},e.prototype.findDocumentSymbols2=function(e,t,r){var n=this;void 0===r&&(r={resultLimit:Number.MAX_VALUE});var s=t.root;if(!s)return[];var i=r.resultLimit||Number.MAX_VALUE,o=e.uri;if(("vscode://defaultsettings/keybindings.json"===o||y(o.toLowerCase(),"/user/keybindings.json"))&&"array"===s.type){for(var a=[],c=0,l=s.items;c<l.length;c++){var u=l[c];if("object"===u.type)for(var m=0,f=u.properties;m<f.length;m++){var p=f[m];if("key"===p.keyNode.value&&p.valueNode){var d=ve(e,u),g=ve(e,p.keyNode);if(a.push({name:D(p.valueNode),kind:h.cR.Function,range:d,selectionRange:g}),--i<=0)return r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(o),a}}}return a}for(var v=[],b=[{node:s,result:v}],x=0,S=!1,A=function(t,r){"array"===t.type?t.items.forEach((function(t,s){if(t)if(i>0){i--;var o=ve(e,t),a=o,c={name:String(s),kind:n.getSymbolKind(t.type),range:o,selectionRange:a,children:[]};r.push(c),b.push({result:c.children,node:t})}else S=!0})):"object"===t.type&&t.properties.forEach((function(t){var s=t.valueNode;if(s)if(i>0){i--;var o=ve(e,t),a=ve(e,t.keyNode),c=[],l={name:n.getKeyLabel(t),kind:n.getSymbolKind(s.type),range:o,selectionRange:a,children:c,detail:n.getDetail(s)};r.push(l),b.push({result:c,node:s})}else S=!0}))};x<b.length;){var T=b[x++];A(T.node,T.result)}return S&&r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(o),v},e.prototype.getSymbolKind=function(e){switch(e){case"object":return h.cR.Module;case"string":return h.cR.String;case"number":return h.cR.Number;case"array":return h.cR.Array;case"boolean":return h.cR.Boolean;default:return h.cR.Variable}},e.prototype.getKeyLabel=function(e){var t=e.keyNode.value;return t&&(t=t.replace(/[\n]/g,"↵")),t&&t.trim()?t:'"'+t+'"'},e.prototype.getDetail=function(e){if(e)return"boolean"===e.type||"number"===e.type||"null"===e.type||"string"===e.type?String(e.value):"array"===e.type?e.children.length?void 0:"[]":"object"===e.type?e.children.length?void 0:"{}":void 0},e.prototype.findDocumentColors=function(e,t,r){return this.schemaService.getSchemaForResource(e.uri,t).then((function(n){var s=[];if(n)for(var i=r&&"number"==typeof r.resultLimit?r.resultLimit:Number.MAX_VALUE,o={},a=0,c=t.getMatchingSchemas(n.schema);a<c.length;a++){var l=c[a];if(!l.inverted&&l.schema&&("color"===l.schema.format||"color-hex"===l.schema.format)&&l.node&&"string"===l.node.type){var u=String(l.node.offset);if(!o[u]){var h=ge(D(l.node));if(h){var m=ve(e,l.node);s.push({color:h,range:m})}if(o[u]=!0,--i<=0)return r&&r.onResultLimitExceeded&&r.onResultLimitExceeded(e.uri),s}}}return s}))},e.prototype.getColorPresentations=function(e,t,r,n){var s,i=[],o=Math.round(255*r.red),a=Math.round(255*r.green),c=Math.round(255*r.blue);function l(e){var t=e.toString(16);return 2!==t.length?"0"+t:t}return s=1===r.alpha?"#"+l(o)+l(a)+l(c):"#"+l(o)+l(a)+l(c)+l(Math.round(255*r.alpha)),i.push({label:s,textEdit:h.PY.replace(n,JSON.stringify(s))}),i},e}();function ve(e,t){return h.e6.create(e.positionAt(t.offset),e.positionAt(t.offset+t.length))}var be,xe,Se,Ae,Te,Oe=O(),we={schemaAssociations:[],schemas:{"http://json-schema.org/schema#":{$ref:"http://json-schema.org/draft-07/schema#"},"http://json-schema.org/draft-04/schema#":{$schema:"http://json-schema.org/draft-04/schema#",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{type:"string",enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},default:{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean",default:!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean",default:!1},maxLength:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minLength:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minItems:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},uniqueItems:{type:"boolean",default:!1},maxProperties:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minProperties:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},required:{allOf:[{$ref:"#/definitions/stringArray"}]},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{anyOf:[{type:"string",enum:["date-time","uri","email","hostname","ipv4","ipv6","regex"]},{type:"string"}]},allOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},anyOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},oneOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},not:{allOf:[{$ref:"#"}]}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},default:{}},"http://json-schema.org/draft-07/schema#":{definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}},Me={id:Oe("schema.json.id","A unique identifier for the schema."),$schema:Oe("schema.json.$schema","The schema to verify this document against."),title:Oe("schema.json.title","A descriptive title of the element."),description:Oe("schema.json.description","A long description of the element. Used in hover menus and suggestions."),default:Oe("schema.json.default","A default value. Used by suggestions."),multipleOf:Oe("schema.json.multipleOf","A number that should cleanly divide the current value (i.e. have no remainder)."),maximum:Oe("schema.json.maximum","The maximum numerical value, inclusive by default."),exclusiveMaximum:Oe("schema.json.exclusiveMaximum","Makes the maximum property exclusive."),minimum:Oe("schema.json.minimum","The minimum numerical value, inclusive by default."),exclusiveMinimum:Oe("schema.json.exclusiveMininum","Makes the minimum property exclusive."),maxLength:Oe("schema.json.maxLength","The maximum length of a string."),minLength:Oe("schema.json.minLength","The minimum length of a string."),pattern:Oe("schema.json.pattern","A regular expression to match the string against. It is not implicitly anchored."),additionalItems:Oe("schema.json.additionalItems","For arrays, only when items is set as an array. If it is a schema, then this schema validates items after the ones specified by the items array. If it is false, then additional items will cause validation to fail."),items:Oe("schema.json.items","For arrays. Can either be a schema to validate every element against or an array of schemas to validate each item against in order (the first schema will validate the first element, the second schema will validate the second element, and so on."),maxItems:Oe("schema.json.maxItems","The maximum number of items that can be inside an array. Inclusive."),minItems:Oe("schema.json.minItems","The minimum number of items that can be inside an array. Inclusive."),uniqueItems:Oe("schema.json.uniqueItems","If all of the items in the array must be unique. Defaults to false."),maxProperties:Oe("schema.json.maxProperties","The maximum number of properties an object can have. Inclusive."),minProperties:Oe("schema.json.minProperties","The minimum number of properties an object can have. Inclusive."),required:Oe("schema.json.required","An array of strings that lists the names of all properties required on this object."),additionalProperties:Oe("schema.json.additionalProperties","Either a schema or a boolean. If a schema, then used to validate all properties not matched by 'properties' or 'patternProperties'. If false, then any properties not matched by either will cause this schema to fail."),definitions:Oe("schema.json.definitions","Not used for validation. Place subschemas here that you wish to reference inline with $ref."),properties:Oe("schema.json.properties","A map of property names to schemas for each property."),patternProperties:Oe("schema.json.patternProperties","A map of regular expressions on property names to schemas for matching properties."),dependencies:Oe("schema.json.dependencies","A map of property names to either an array of property names or a schema. An array of property names means the property named in the key depends on the properties in the array being present in the object in order to be valid. If the value is a schema, then the schema is only applied to the object if the property in the key exists on the object."),enum:Oe("schema.json.enum","The set of literal values that are valid."),type:Oe("schema.json.type","Either a string of one of the basic schema types (number, integer, null, array, object, boolean, string) or an array of strings specifying a subset of those types."),format:Oe("schema.json.format","Describes the format expected for the value."),allOf:Oe("schema.json.allOf","An array of schemas, all of which must match."),anyOf:Oe("schema.json.anyOf","An array of schemas, where at least one must match."),oneOf:Oe("schema.json.oneOf","An array of schemas, exactly one of which must match."),not:Oe("schema.json.not","A schema which must not match."),$id:Oe("schema.json.$id","A unique identifier for the schema."),$ref:Oe("schema.json.$ref","Reference a definition hosted on any location."),$comment:Oe("schema.json.$comment","Comments from schema authors to readers or maintainers of the schema."),readOnly:Oe("schema.json.readOnly","Indicates that the value of the instance is managed exclusively by the owning authority."),examples:Oe("schema.json.examples","Sample JSON values associated with a particular schema, for the purpose of illustrating usage."),contains:Oe("schema.json.contains",'An array instance is valid against "contains" if at least one of its elements is valid against the given schema.'),propertyNames:Oe("schema.json.propertyNames","If the instance is an object, this keyword validates if every property name in the instance validates against the provided schema."),const:Oe("schema.json.const","An instance validates successfully against this keyword if its value is equal to the value of the keyword."),contentMediaType:Oe("schema.json.contentMediaType","Describes the media type of a string property."),contentEncoding:Oe("schema.json.contentEncoding","Describes the content encoding of a string property."),if:Oe("schema.json.if",'The validation outcome of the "if" subschema controls which of the "then" or "else" keywords are evaluated.'),then:Oe("schema.json.then",'The "if" subschema is used for validation when the "if" subschema succeeds.'),else:Oe("schema.json.else",'The "else" subschema is used for validation when the "if" subschema fails.')};for(Te in we.schemas)for(Ae in(be=we.schemas[Te]).properties)"boolean"==typeof(xe=be.properties[Ae])&&(xe=be.properties[Ae]={}),(Se=Me[Ae])?xe.description=Se:console.log(Ae+": localize('schema.json."+Ae+'\', "")');function Pe(e,t){var r=[];return t.visit((function(n){var s;if("property"===n.type&&"$ref"===n.keyNode.value&&"string"===(null===(s=n.valueNode)||void 0===s?void 0:s.type)){var i=n.valueNode.value,o=function(e,t){var r=function(e){return"#"===e?[]:"#"!==e[0]||"/"!==e[1]?null:e.substring(2).split(/\//).map(Ce)}(t);return r?Ve(r,e.root):null}(t,i);if(o){var a=e.positionAt(o.offset);r.push({target:e.uri+"#"+(a.line+1)+","+(a.character+1),range:je(e,n.valueNode)})}}return!0})),Promise.resolve(r)}function je(e,t){return h.e6.create(e.positionAt(t.offset+1),e.positionAt(t.offset+t.length-1))}function Ve(e,t){if(!t)return null;if(0===e.length)return t;var r=e.shift();if(t&&"object"===t.type){var n=t.properties.find((function(e){return e.keyNode.value===r}));return n?Ve(e,n.valueNode):null}if(t&&"array"===t.type&&r.match(/^(0|[1-9][0-9]*)$/)){var s=Number.parseInt(r),i=t.items[s];return i?Ve(e,i):null}return null}function Ce(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function ke(e,t){for(const r of t.documents)if(r.internalDocument&&r.internalDocument.range[0]<=e&&r.internalDocument.range[2]>=e)return r;return 1===t.documents.length?t.documents[0]:null}function Ie(e){const t=["mapping","scalar","sequence"];return e?e.filter((e=>{if("string"==typeof e){const r=e.split(" "),n=r[1]&&r[1].toLowerCase()||"scalar";return"map"!==n&&-1!==t.indexOf(n)}return!1})):[]}function $e(e,t){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(let r=e.length-1;r>=0;r--)if(e[r]!==t[r])return!1;return!0}var Fe,Ne,Ee=O(),De={"color-hex":{errorMessage:Ee("colorHexFormatWarning","Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA."),pattern:/^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/},"date-time":{errorMessage:Ee("dateTimeFormatWarning","String is not a RFC3339 date-time."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},date:{errorMessage:Ee("dateFormatWarning","String is not a RFC3339 date."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/i},time:{errorMessage:Ee("timeFormatWarning","String is not a RFC3339 time."),pattern:/^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},email:{errorMessage:Ee("emailFormatWarning","String is not an e-mail address."),pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}},Re="YAML";(Ne=Fe||(Fe={})).missingRequiredPropWarning="missingRequiredPropWarning",Ne.typeMismatchWarning="typeMismatchWarning",Ne.constWarning="constWarning";var We,Le={[Fe.missingRequiredPropWarning]:'Missing property "{0}".',[Fe.typeMismatchWarning]:'Incorrect type. Expected "{0}".',[Fe.constWarning]:"Value must be {0}."},Ue=class{constructor(e,t,r,n){this.offset=r,this.length=n,this.parent=e,this.internalNode=t}getNodeFromOffsetEndInclusive(e){const t=[],r=n=>{if(e>=n.offset&&e<=n.offset+n.length){const s=n.children;for(let n=0;n<s.length&&s[n].offset<=e;n++){const e=r(s[n]);e&&t.push(e)}return n}return null},n=r(this);let s=Number.MAX_VALUE,i=null;for(const r of t){const t=r.length+r.offset-e+(e-r.offset);t<s&&(i=r,s=t)}return i||n}get children(){return[]}toString(){return"type: "+this.type+" ("+this.offset+"/"+this.length+")"+(this.parent?" parent: {"+this.parent.toString()+"}":"")}},_e=class extends Ue{constructor(e,t,r,n){super(e,t,r,n),this.type="null",this.value=null}},qe=class extends Ue{constructor(e,t,r,n,s){super(e,t,n,s),this.type="boolean",this.value=r}},He=class extends Ue{constructor(e,t,r,n){super(e,t,r,n),this.type="array",this.items=[]}get children(){return this.items}},Ke=class extends Ue{constructor(e,t,r,n){super(e,t,r,n),this.type="number",this.isInteger=!0,this.value=Number.NaN}},Be=class extends Ue{constructor(e,t,r,n){super(e,t,r,n),this.type="string",this.value=""}},Ge=class extends Ue{constructor(e,t,r,n){super(e,t,r,n),this.type="property",this.colonOffset=-1}get children(){return this.valueNode?[this.keyNode,this.valueNode]:[this.keyNode]}},Je=class extends Ue{constructor(e,t,r,n){super(e,t,r,n),this.type="object",this.properties=[]}get children(){return this.properties}};function Ye(e){if(void 0!==e)return re(e)?e?{}:{not:{}}:("object"!=typeof e&&(console.warn(`Wrong schema: ${JSON.stringify(e)}, it MUST be an Object or Boolean`),e={type:e}),e)}!function(e){e[e.Key=0]="Key",e[e.Enum=1]="Enum"}(We||(We={}));var ze=class{constructor(e=-1,t=null){this.focusOffset=e,this.exclude=t,this.schemas=[]}add(e){this.schemas.push(e)}merge(e){this.schemas.push(...e.schemas)}include(e){return(-1===this.focusOffset||et(e,this.focusOffset))&&e!==this.exclude}newSub(){return new ze(-1,this.exclude)}},Ze=class{constructor(){}get schemas(){return[]}add(e){}merge(e){}include(e){return!0}newSub(){return this}};Ze.instance=new Ze;var Xe=class{constructor(e){this.problems=[],this.propertiesMatches=0,this.propertiesValueMatches=0,this.primaryValueMatches=0,this.enumValueMatch=!1,this.enumValues=e?[]:null}hasProblems(){return!!this.problems.length}mergeAll(e){for(const t of e)this.merge(t)}merge(e){this.problems=this.problems.concat(e.problems)}mergeEnumValues(e){if(!this.enumValueMatch&&!e.enumValueMatch&&this.enumValues&&e.enumValues){this.enumValues=this.enumValues.concat(e.enumValues);for(const e of this.problems)e.code===s.EnumValueMismatch&&(e.message=Ee("enumWarning","Value is not accepted. Valid values: {0}.",[...new Set(this.enumValues)].map((e=>JSON.stringify(e))).join(", ")))}}mergeWarningGeneric(e,t){var r,n;if(null===(r=this.problems)||void 0===r?void 0:r.length)for(const r of t){const t=this.problems.filter((e=>e.problemType===r));for(const s of t){const t=null===(n=e.problems)||void 0===n?void 0:n.find((e=>e.problemType===r&&s.location.offset===e.location.offset&&(r!==Fe.missingRequiredPropWarning||$e(e.problemArgs,s.problemArgs))));t&&(t.problemArgs.length&&(t.problemArgs.filter((e=>!s.problemArgs.includes(e))).forEach((e=>s.problemArgs.push(e))),s.message=it(s.problemType,s.problemArgs)),this.mergeSources(t,s))}}}mergePropertyMatch(e){this.merge(e),this.propertiesMatches++,(e.enumValueMatch||!e.hasProblems()&&e.propertiesMatches)&&this.propertiesValueMatches++,e.enumValueMatch&&e.enumValues&&this.primaryValueMatches++}mergeSources(e,t){const r=e.source.replace("yaml-schema: ","");t.source.includes(r)||(t.source=t.source+" | "+r),t.schemaUri.includes(e.schemaUri[0])||(t.schemaUri=t.schemaUri.concat(e.schemaUri))}compareGeneric(e){const t=this.hasProblems();return t!==e.hasProblems()?t?-1:1:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:this.primaryValueMatches!==e.primaryValueMatches?this.primaryValueMatches-e.primaryValueMatches:this.propertiesMatches-e.propertiesMatches}compareKubernetes(e){const t=this.hasProblems();return this.propertiesMatches!==e.propertiesMatches?this.propertiesMatches-e.propertiesMatches:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.primaryValueMatches!==e.primaryValueMatches?this.primaryValueMatches-e.primaryValueMatches:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:t!==e.hasProblems()?t?-1:1:this.propertiesMatches-e.propertiesMatches}};function Qe(e){switch(e.type){case"array":return e.children.map(Qe);case"object":{const t=Object.create(null);for(let r=0,n=e.children;r<n.length;r++){const e=n[r],s=e.children[1];s&&(t[e.children[0].value]=Qe(s))}return t}case"null":case"string":case"number":case"boolean":return e.value;default:return}}function et(e,t,r=!1){return t>=e.offset&&t<=e.offset+e.length||r&&t===e.offset+e.length}function tt(e,t,r){if(void 0===r&&(r=!1),et(e,t,r)){const n=e.children;if(Array.isArray(n))for(let e=0;e<n.length&&n[e].offset<=t;e++){const s=tt(n[e],t,r);if(s)return s}return e}}function rt(e,t,r,n,i,o){const{isKubernetes:a}=o;if(e&&i.include(e)&&"object"==typeof t){switch(t.url||(t.url=r.url),t.closestTitle=t.title||r.closestTitle,e.type){case"object":!function(e,t,n,s){var i;const c=Object.create(null),l=[],u=[...e.properties];for(;u.length>0;){const e=u.pop(),t=e.keyNode.value;if("<<"===t&&e.valueNode)switch(e.valueNode.type){case"object":u.push(...e.valueNode.properties);break;case"array":e.valueNode.items.forEach((e=>{var t;e&&(t=e.properties,Symbol.iterator in Object(t))&&u.push(...e.properties)}))}else c[t]=e.valueNode,l.push(t)}if(Array.isArray(t.required))for(const s of t.required)if(void 0===c[s]){const i=e.parent&&"property"===e.parent.type&&e.parent.keyNode,o=i?{offset:i.offset,length:i.length}:{offset:e.offset,length:1};n.problems.push({location:o,severity:h.H_.Warning,message:it(Fe.missingRequiredPropWarning,[s]),source:nt(t,r),schemaUri:st(t,r),problemArgs:[s],problemType:Fe.missingRequiredPropWarning})}const m=e=>{let t=l.indexOf(e);for(;t>=0;)l.splice(t,1),t=l.indexOf(e)};if(t.properties)for(const e of Object.keys(t.properties)){m(e);const l=t.properties[e],u=c[e];if(u)if(re(l))if(l)n.propertiesMatches++,n.propertiesValueMatches++;else{const s=u.parent;n.problems.push({location:{offset:s.keyNode.offset,length:s.keyNode.length},severity:h.H_.Warning,message:t.errorMessage||Ee("DisallowedExtraPropWarning","Property {0} is not allowed.",e),source:nt(t,r),schemaUri:st(t,r)})}else{l.url=null!==(i=t.url)&&void 0!==i?i:r.url;const e=new Xe(a);rt(u,l,t,e,s,o),n.mergePropertyMatch(e),n.mergeEnumValues(e)}}if(t.patternProperties)for(const e of Object.keys(t.patternProperties)){const i=Z(e);for(const u of l.slice(0))if(i.test(u)){m(u);const i=c[u];if(i){const c=t.patternProperties[e];if(re(c))if(c)n.propertiesMatches++,n.propertiesValueMatches++;else{const e=i.parent;n.problems.push({location:{offset:e.keyNode.offset,length:e.keyNode.length},severity:h.H_.Warning,message:t.errorMessage||Ee("DisallowedExtraPropWarning","Property {0} is not allowed.",u),source:nt(t,r),schemaUri:st(t,r)})}else{const e=new Xe(a);rt(i,c,t,e,s,o),n.mergePropertyMatch(e),n.mergeEnumValues(e)}}}}if("object"==typeof t.additionalProperties)for(const e of l){const r=c[e];if(r){const e=new Xe(a);rt(r,t.additionalProperties,t,e,s,o),n.mergePropertyMatch(e),n.mergeEnumValues(e)}}else if((!1===t.additionalProperties||"object"===t.type&&void 0===t.additionalProperties&&!0===o.disableAdditionalProperties)&&l.length>0)for(const e of l){const s=c[e];if(s){let i=null;"property"!==s.type?(i=s.parent,"object"===i.type&&(i=i.properties[0])):i=s,n.problems.push({location:{offset:i.keyNode.offset,length:i.keyNode.length},severity:h.H_.Warning,message:t.errorMessage||Ee("DisallowedExtraPropWarning","Property {0} is not allowed.",e),source:nt(t,r),schemaUri:st(t,r)})}}if(ee(t.maxProperties)&&e.properties.length>t.maxProperties&&n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:Ee("MaxPropWarning","Object has more properties than limit of {0}.",t.maxProperties),source:nt(t,r),schemaUri:st(t,r)}),ee(t.minProperties)&&e.properties.length<t.minProperties&&n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:Ee("MinPropWarning","Object has fewer properties than the required number of {0}",t.minProperties),source:nt(t,r),schemaUri:st(t,r)}),t.dependencies)for(const i of Object.keys(t.dependencies))if(c[i]){const l=t.dependencies[i];if(Array.isArray(l))for(const s of l)c[s]?n.propertiesValueMatches++:n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:Ee("RequiredDependentPropWarning","Object is missing property {0} required by property {1}.",s,i),source:nt(t,r),schemaUri:st(t,r)});else{const r=Ye(l);if(r){const i=new Xe(a);rt(e,r,t,i,s,o),n.mergePropertyMatch(i),n.mergeEnumValues(i)}}}const f=Ye(t.propertyNames);if(f)for(const r of e.properties){const e=r.keyNode;e&&rt(e,f,t,n,Ze.instance,o)}}(e,t,n,i);break;case"array":!function(e,t,n,s){if(Array.isArray(t.items)){const i=t.items;for(let r=0;r<i.length;r++){const c=Ye(i[r]),l=new Xe(a),u=e.items[r];u?(rt(u,c,t,l,s,o),n.mergePropertyMatch(l),n.mergeEnumValues(l)):e.items.length>=i.length&&n.propertiesValueMatches++}if(e.items.length>i.length)if("object"==typeof t.additionalItems)for(let r=i.length;r<e.items.length;r++){const i=new Xe(a);rt(e.items[r],t.additionalItems,t,i,s,o),n.mergePropertyMatch(i),n.mergeEnumValues(i)}else!1===t.additionalItems&&n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:Ee("additionalItemsWarning","Array has too many items according to schema. Expected {0} or fewer.",i.length),source:nt(t,r),schemaUri:st(t,r)})}else{const r=Ye(t.items);if(r){const i=new Xe(a);e.items.forEach((e=>{if(r.oneOf&&1===r.oneOf.length){const a=Ye(r.oneOf[0]);a.title=t.title,a.closestTitle=t.closestTitle,rt(e,a,t,i,s,o),n.mergePropertyMatch(i),n.mergeEnumValues(i)}else rt(e,r,t,i,s,o),n.mergePropertyMatch(i),n.mergeEnumValues(i)}))}}const i=Ye(t.contains);if(i&&(e.items.some((e=>{const r=new Xe(a);return rt(e,i,t,r,Ze.instance,o),!r.hasProblems()}))||n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:t.errorMessage||Ee("requiredItemMissingWarning","Array does not contain required item."),source:nt(t,r),schemaUri:st(t,r)})),ee(t.minItems)&&e.items.length<t.minItems&&n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:Ee("minItemsWarning","Array has too few items. Expected {0} or more.",t.minItems),source:nt(t,r),schemaUri:st(t,r)}),ee(t.maxItems)&&e.items.length>t.maxItems&&n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:Ee("maxItemsWarning","Array has too many items. Expected {0} or fewer.",t.maxItems),source:nt(t,r),schemaUri:st(t,r)}),!0===t.uniqueItems){const s=Qe(e);s.some(((e,t)=>t!==s.lastIndexOf(e)))&&n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:Ee("uniqueItemsWarning","Array has duplicate items."),source:nt(t,r),schemaUri:st(t,r)})}}(e,t,n,i);break;case"string":!function(e,t,n){if(ee(t.minLength)&&e.value.length<t.minLength&&n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:Ee("minLengthWarning","String is shorter than the minimum length of {0}.",t.minLength),source:nt(t,r),schemaUri:st(t,r)}),ee(t.maxLength)&&e.value.length>t.maxLength&&n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:Ee("maxLengthWarning","String is longer than the maximum length of {0}.",t.maxLength),source:nt(t,r),schemaUri:st(t,r)}),ne(t.pattern)&&(Z(t.pattern).test(e.value)||n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:t.patternErrorMessage||t.errorMessage||Ee("patternWarning",'String does not match the pattern of "{0}".',t.pattern),source:nt(t,r),schemaUri:st(t,r)})),t.format)switch(t.format){case"uri":case"uri-reference":{let s;if(e.value)try{u.o.parse(e.value).scheme||"uri"!==t.format||(s=Ee("uriSchemeMissing","URI with a scheme is expected."))}catch(e){s=e.message}else s=Ee("uriEmpty","URI expected.");s&&n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:t.patternErrorMessage||t.errorMessage||Ee("uriFormatWarning","String is not a URI: {0}",s),source:nt(t,r),schemaUri:st(t,r)})}break;case"color-hex":case"date-time":case"date":case"time":case"email":{const s=De[t.format];e.value&&s.pattern.exec(e.value)||n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:t.patternErrorMessage||t.errorMessage||s.errorMessage,source:nt(t,r),schemaUri:st(t,r)})}}}(e,t,n);break;case"number":!function(e,t,n){const s=e.value;function i(e,t){return ee(t)?t:re(t)&&t?e:void 0}function o(e,t){if(!re(t)||!t)return e}ee(t.multipleOf)&&s%t.multipleOf!=0&&n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:Ee("multipleOfWarning","Value is not divisible by {0}.",t.multipleOf),source:nt(t,r),schemaUri:st(t,r)});const a=i(t.minimum,t.exclusiveMinimum);ee(a)&&s<=a&&n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:Ee("exclusiveMinimumWarning","Value is below the exclusive minimum of {0}.",a),source:nt(t,r),schemaUri:st(t,r)});const c=i(t.maximum,t.exclusiveMaximum);ee(c)&&s>=c&&n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:Ee("exclusiveMaximumWarning","Value is above the exclusive maximum of {0}.",c),source:nt(t,r),schemaUri:st(t,r)});const l=o(t.minimum,t.exclusiveMinimum);ee(l)&&s<l&&n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:Ee("minimumWarning","Value is below the minimum of {0}.",l),source:nt(t,r),schemaUri:st(t,r)});const u=o(t.maximum,t.exclusiveMaximum);ee(u)&&s>u&&n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:Ee("maximumWarning","Value is above the maximum of {0}.",u),source:nt(t,r),schemaUri:st(t,r)})}(e,t,n);break;case"property":return rt(e.valueNode,t,t,n,i,o)}!function(){function u(t){return e.type===t||"integer"===t&&"number"===e.type&&e.isInteger}if(Array.isArray(t.type))t.type.some(u)||n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:t.errorMessage||Ee("typeArrayMismatchWarning","Incorrect type. Expected one of {0}.",t.type.join(", ")),source:nt(t,r),schemaUri:st(t,r)});else if(t.type&&!u(t.type)){const s="object"===t.type?ie(t):t.type;n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:t.errorMessage||it(Fe.typeMismatchWarning,[s]),source:nt(t,r),schemaUri:st(t,r),problemType:Fe.typeMismatchWarning,problemArgs:[s]})}if(Array.isArray(t.allOf))for(const r of t.allOf)rt(e,Ye(r),t,n,i,o);const m=Ye(t.not);if(m){const s=new Xe(a),c=i.newSub();rt(e,m,t,s,c,o),s.hasProblems()||n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,message:Ee("notSchemaWarning","Matches a schema that is not allowed."),source:nt(t,r),schemaUri:st(t,r)});for(const e of c.schemas)e.inverted=!e.inverted,i.add(e)}const f=(s,u)=>{const m=[],f=[];let p=null;for(const r of s){const n=Ye(r),s=new Xe(a),h=i.newSub();rt(e,n,t,s,h,o),s.hasProblems()||(m.push(n),0===s.propertiesMatches&&f.push(n)),p=p?a?c(s,p,n,h):l(e,u,s,p,n,h):{schema:n,validationResult:s,matchingSchemas:h}}return m.length>1&&0===f.length&&u&&n.problems.push({location:{offset:e.offset,length:1},severity:h.H_.Warning,message:Ee("oneOfWarning","Minimum one schema should validate."),source:nt(t,r),schemaUri:st(t,r)}),null!==p&&(n.merge(p.validationResult),n.propertiesMatches+=p.validationResult.propertiesMatches,n.propertiesValueMatches+=p.validationResult.propertiesValueMatches,i.merge(p.matchingSchemas)),m.length};Array.isArray(t.anyOf)&&f(t.anyOf,!1),Array.isArray(t.oneOf)&&f(t.oneOf,!0);const p=(t,r)=>{const s=new Xe(a),c=i.newSub();rt(e,Ye(t),r,s,c,o),n.merge(s),n.propertiesMatches+=s.propertiesMatches,n.propertiesValueMatches+=s.propertiesValueMatches,i.merge(c)},d=Ye(t.if);if(d&&((t,r,n,s)=>{const c=Ye(t),l=new Xe(a),u=i.newSub();rt(e,c,r,l,u,o),i.merge(u),l.hasProblems()?s&&p(s,r):n&&p(n,r)})(d,t,Ye(t.then),Ye(t.else)),Array.isArray(t.enum)){const i=Qe(e);let o=!1;for(const r of t.enum)if(Q(i,r)||e.value&&r.startsWith(i)){o=!0;break}n.enumValues=t.enum,n.enumValueMatch=o,o||n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,code:s.EnumValueMismatch,message:t.errorMessage||Ee("enumWarning","Value is not accepted. Valid values: {0}.",t.enum.map((e=>JSON.stringify(e))).join(", ")),source:nt(t,r),schemaUri:st(t,r)})}te(t.const)&&(Q(Qe(e),t.const)?n.enumValueMatch=!0:(n.problems.push({location:{offset:e.offset,length:e.length},severity:h.H_.Warning,code:s.EnumValueMismatch,problemType:Fe.constWarning,message:t.errorMessage||it(Fe.constWarning,[JSON.stringify(t.const)]),source:nt(t,r),schemaUri:st(t,r),problemArgs:[JSON.stringify(t.const)]}),n.enumValueMatch=!1),n.enumValues=[t.const]),t.deprecationMessage&&e.parent&&n.problems.push({location:{offset:e.parent.offset,length:e.parent.length},severity:h.H_.Warning,message:t.deprecationMessage,source:nt(t,r),schemaUri:st(t,r)})}(),i.add({node:e,schema:t})}function c(e,t,r,n){const s=e.compareKubernetes(t.validationResult);return s>0?t={schema:r,validationResult:e,matchingSchemas:n}:0===s&&(t.matchingSchemas.merge(n),t.validationResult.mergeEnumValues(e)),t}function l(e,t,r,n,s,i){if(t||r.hasProblems()||n.validationResult.hasProblems()){const o=r.compareGeneric(n.validationResult);o>0||0===o&&t&&"object"===n.schema.type&&"null"!==e.type&&e.type!==n.schema.type?n={schema:s,validationResult:r,matchingSchemas:i}:0===o&&(n.matchingSchemas.merge(i),n.validationResult.mergeEnumValues(r),n.validationResult.mergeWarningGeneric(r,[Fe.missingRequiredPropWarning,Fe.typeMismatchWarning,Fe.constWarning]))}else n.matchingSchemas.merge(i),n.validationResult.propertiesMatches+=r.propertiesMatches,n.validationResult.propertiesValueMatches+=r.propertiesValueMatches;return n}}function nt(e,t){var r;if(e){let n;if(e.title)n=e.title;else if(e.closestTitle)n=e.closestTitle;else if(t.closestTitle)n=t.closestTitle;else{const s=null!==(r=e.url)&&void 0!==r?r:t.url;if(s){const e=u.o.parse(s);"file"===e.scheme&&(n=e.fsPath),n=e.toString()}}if(n)return`yaml-schema: ${n}`}return Re}function st(e,t){var r;const n=null!==(r=e.url)&&void 0!==r?r:t.url;return n?[n]:[]}function it(e,t){return Ee(e,Le[e],t.join(" | "))}var ot=0;function at(e,t,r,n){if(e||(ot=0),!t)return null;if((0,m._N)(t))return function(e,t,r,n){let s;s=e.flow&&!e.range?function(e){let t=Number.MAX_SAFE_INTEGER,r=0;for(const n of e.items)(0,m.vG)(n)&&((0,m.UG)(n.key)&&n.key.range&&n.key.range[0]<=t&&(t=n.key.range[0]),(0,m.UG)(n.value)&&n.value.range&&n.value.range[2]>=r&&(r=n.value.range[2]));return[t,r,r]}(e):e.range;const i=new Je(t,e,...lt(s,n));for(const t of e.items)(0,m.vG)(t)&&i.properties.push(at(i,t,r,n));return i}(t,e,r,n);if((0,m.vG)(t))return function(e,t,r,n){const s=e.key,i=e.value,o=s.range[0];let a=s.range[1],c=s.range[2];i&&(a=i.range[1],c=i.range[2]);const l=new Ge(t,e,...lt([o,a,c],n));if((0,m.lA)(s)){const e=new Be(t,s,...ct(s.range));e.value=s.source,l.keyNode=e}else l.keyNode=at(l,s,r,n);return l.valueNode=at(l,i,r,n),l}(t,e,r,n);if((0,m.xw)(t))return function(e,t,r,n){const s=new He(t,e,...ct(e.range));for(const t of e.items)if((0,m.UG)(t)){const e=at(s,t,r,n);e&&s.children.push(e)}return s}(t,e,r,n);if((0,m.jF)(t))return function(e,t){if(null===e.value)return new _e(t,e,...ct(e.range));switch(typeof e.value){case"string":{const r=new Be(t,e,...ct(e.range));return r.value=e.value,r}case"boolean":return new qe(t,e,e.value,...ct(e.range));case"number":{const r=new Ke(t,e,...ct(e.range));return r.value=e.value,r.isInteger=Number.isInteger(r.value),r}default:{const r=new Be(t,e,...ct(e.range));return r.value=e.source,r}}}(t,e);if((0,m.lA)(t)){if(ot>1e3)return;return function(e,t,r,n){ot++;const s=e.resolve(r);if(s)return at(t,s,r,n);{const r=new Be(t,e,...ct(e.range));return r.value=e.source,r}}(t,e,r,n)}}function ct(e){return[e[0],e[1]-e[0]]}function lt(e,t){const r=t.linePos(e[0]),n=t.linePos(e[1]),s=[e[0],e[1]-e[0]];return r.line===n.line||t.lineStarts.length===n.line&&1!==n.col||s[1]--,s}function ut(e){return void 0!==e.start}function ht(e,t,r){let n=r(t,e);if("symbol"==typeof n)return n;for(const s of["key","value"]){const i=t[s];if(i&&"items"in i){for(let t=0;t<i.items.length;++t){const n=ht(Object.freeze(e.concat([[s,t]])),i.items[t],r);if("number"==typeof n)t=n-1;else{if(n===m.Vn.BREAK)return m.Vn.BREAK;n===m.Vn.REMOVE&&(i.items.splice(t,1),t-=1)}}"function"==typeof n&&"key"===s&&(n=n(t,e))}}const s=t.sep;if(s)for(let t=0;t<s.length;++t){const n=ht(Object.freeze(e),s[t],r);if("number"==typeof n)t=n-1;else{if(n===m.Vn.BREAK)return m.Vn.BREAK;n===m.Vn.REMOVE&&(s.items.splice(t,1),t-=1)}}return"function"==typeof n?n(t,e):n}var mt=class extends class{constructor(e,t=[],r=[]){this.root=e,this.syntaxErrors=t,this.comments=r}getNodeFromOffset(e,t=!1){if(this.root)return tt(this.root,e,t)}getNodeFromOffsetEndInclusive(e){return this.root&&this.root.getNodeFromOffsetEndInclusive(e)}visit(e){if(this.root){const t=r=>{let n=e(r);const s=r.children;if(Array.isArray(s))for(let e=0;e<s.length&&n;e++)n=t(s[e]);return n};t(this.root)}}validate(e,t){if(this.root&&t){const r=new Xe(this.isKubernetes);return rt(this.root,t,t,r,Ze.instance,{isKubernetes:this.isKubernetes,disableAdditionalProperties:this.disableAdditionalProperties}),r.problems.map((t=>{const r=h.e6.create(e.positionAt(t.location.offset),e.positionAt(t.location.offset+t.location.length)),n=h.R9.create(r,t.message,t.severity,t.code?t.code:s.Undefined,t.source);return n.data={schemaUri:t.schemaUri},n}))}return null}getMatchingSchemas(e,t=-1,r=null){const n=new ze(t,r);return this.root&&e&&rt(this.root,e,e,new Xe(this.isKubernetes),n,{isKubernetes:this.isKubernetes,disableAdditionalProperties:this.disableAdditionalProperties}),n.schemas}}{constructor(e){super(null,[]),this.lineCounter=e}clone(){const e=new mt(this.lineCounter);return e.isKubernetes=this.isKubernetes,e.disableAdditionalProperties=this.disableAdditionalProperties,e.currentDocIndex=this.currentDocIndex,e._lineComments=this.lineComments.slice(),e.internalDocument=this._internalDocument.clone(),e}collectLineComments(){this._lineComments=[],this._internalDocument.commentBefore&&this._internalDocument.commentBefore.split("\n").forEach((e=>this._lineComments.push(`#${e}`))),(0,m.Vn)(this.internalDocument,((e,t)=>{(null==t?void 0:t.commentBefore)&&(null==t?void 0:t.commentBefore.split("\n")).forEach((e=>this._lineComments.push(`#${e}`))),(null==t?void 0:t.comment)&&this._lineComments.push(`#${t.comment}`)})),this._internalDocument.comment&&this._lineComments.push(`#${this._internalDocument.comment}`)}set internalDocument(e){this._internalDocument=e,this.root=at(null,this._internalDocument.contents,this._internalDocument,this.lineCounter)}get internalDocument(){return this._internalDocument}get lineComments(){return this._lineComments||this.collectLineComments(),this._lineComments}set lineComments(e){this._lineComments=e}get errors(){return this.internalDocument.errors.map(dt)}get warnings(){return this.internalDocument.warnings.map(dt)}getNodeFromPosition(e,t,r){const n=t.getPosition(e);if(0===t.getLineContent(n.line).trim().length)return[this.findClosestNode(e,t,r),!0];let s;return(0,m.Vn)(this.internalDocument,((t,r)=>{if(!r)return;const n=r.range;return n?n[0]<=e&&n[1]>=e?void(s=r):m.Vn.SKIP:void 0})),[s,!1]}findClosestNode(e,t,r){let n,s=this.internalDocument.range[2],i=this.internalDocument.range[0];(0,m.Vn)(this.internalDocument,((t,r)=>{if(!r)return;const o=r.range;if(!o)return;const a=o[2]-e;i<=o[0]&&a<=0&&Math.abs(a)<=s&&(s=Math.abs(a),i=o[0],n=r)}));const o=t.getPosition(e),a=function(e,t){if(e.length<t)return 0;for(let r=0;r<t;r++){const t=e.charCodeAt(r);if(32!==t&&9!==t)return r}return t}(t.getLineContent(o.line),o.character);return(0,m.jF)(n)&&null===n.value||a===o.character&&(n=this.getProperParentByIndentation(a,n,t,"",r)),n}getProperParentByIndentation(e,t,r,n,s,i){if(!t)return this.internalDocument.contents;if(s=s||2,(0,m.UG)(t)&&t.range){const o=r.getPosition(t.range[0]),a=r.getLineContent(o.line);if((n=""===n?a.trim():n).startsWith("-")&&e===s&&n===a.trim()&&(o.character+=e),o.character>e&&o.character>0){const o=this.getParent(t);if(o)return this.getProperParentByIndentation(e,o,r,n,s,i)}else{if(!(o.character<e))return t;{const e=this.getParent(t);if((0,m.vG)(e)&&(0,m.UG)(e.value))return e.value;if((0,m.vG)(i)&&(0,m.UG)(i.value))return i.value}}}else if((0,m.vG)(t)){i=t;const o=this.getParent(t);return this.getProperParentByIndentation(e,o,r,n,s,i)}return t}getParent(e){return function(e,t){let r;if((0,m.Vn)(e,((e,n,s)=>{if(n===t)return r=s[s.length-1],m.Vn.BREAK})),!(0,m.qk)(r))return r}(this.internalDocument,e)}},ft=class{constructor(e,t){this.documents=e,this.tokens=t,this.errors=[],this.warnings=[]}},pt=new class{constructor(){this.cache=new Map}getYamlDocument(e,t,r=!1){return this.ensureCache(e,null!=t?t:bt,r),this.cache.get(e.uri).document}clear(){this.cache.clear()}ensureCache(e,t,r){const n=e.uri;this.cache.has(n)||this.cache.set(n,{version:-1,document:new ft([],[]),parserOptions:bt});const s=this.cache.get(n);if(s.version!==e.version||t.customTags&&!$e(s.parserOptions.customTags,t.customTags)){let n=e.getText();r&&!/\S/.test(n)&&(n=`{${n}}`);const i=function(e,t=bt,r){var n;const s={strict:!1,customTags:yt(t.customTags),version:null!==(n=t.yamlVersion)&&void 0!==n?n:bt.yamlVersion,keepSourceTokens:!0},i=new m.ad(s),o=new m.Yj;let a=!1;if(r){const t=new vt(r),n=t.getPosition(e.length);a=0===t.getLineContent(n.line).trim().length}const c=(a?new m._b:new m._b(o.addNewLine)).parse(e),l=Array.from(c),u=i.compose(l,!0,e.length),h=Array.from(u,(e=>function(e,t){const r=new mt(t);return r.internalDocument=e,r}(e,o)));return new ft(h,l)}(n,t,e);s.document=i,s.version=e.version,s.parserOptions=t}}};function dt(e){return{message:e.message,location:{start:e.pos[0],end:e.pos[1],toLineEnd:!0},severity:1,code:s.Undefined}}var gt=class{constructor(e,t){this.tag=e,this.type=t}get collection(){return"mapping"===this.type?"map":"sequence"===this.type?"seq":void 0}resolve(e){return(0,m._N)(e)&&"mapping"===this.type||(0,m.xw)(e)&&"sequence"===this.type||"string"==typeof e&&"scalar"===this.type?e:void 0}};function yt(e){const t=[],r=Ie(e);for(const e of r){const r=e.split(" "),n=r[0],s=r[1]&&r[1].toLowerCase()||"scalar";t.push(new gt(n,s))}return t.push(new class{constructor(){this.tag="!include",this.type="scalar"}resolve(e,t){if(e&&e.length>0&&e.trim())return e;t("!include without value")}}),t}var vt=class{constructor(e){this.doc=e}getLineCount(){return this.doc.lineCount}getLineLength(e){const t=this.doc.getLineOffsets();return e>=t.length?this.doc.getText().length:e<0?0:(e+1<t.length?t[e+1]:this.doc.getText().length)-t[e]}getLineContent(e){const t=this.doc.getLineOffsets();if(e>=t.length)return this.doc.getText();if(e<0)return"";const r=e+1<t.length?t[e+1]:this.doc.getText().length;return this.doc.getText().substring(t[e],r)}getLineCharCode(e,t){return this.doc.getText(h.e6.create(e-1,t-1,e-1,t)).charCodeAt(0)}getText(e){return this.doc.getText(e)}getPosition(e){return this.doc.positionAt(e)}},bt={customTags:[],yamlVersion:"1.2"};function xt(e){const t=e.match(/^#\s+yaml-language-server\s*:/g);return null!==t&&1===t.length}var St,At,Tt=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))},Ot=O();(At=St||(St={}))[At.delete=0]="delete",At[At.add=1]="add",At[At.deleteAll=2]="deleteAll";var wt=class extends G{constructor(e,t,r){super(e,t,r),this.schemaUriToNameAndDescription=new Map,this.customSchemaProvider=void 0,this.requestService=e,this.schemaPriorityMapping=new Map}registerCustomSchemaProvider(e){this.customSchemaProvider=e}getAllSchemas(){const e=[],t=new Set;for(const r of this.filePatternAssociations){const n=r.uris[0];if(t.has(n))continue;t.add(n);const s={uri:n,fromStore:!1,usedForCurrentFile:!1};if(this.schemaUriToNameAndDescription.has(n)){const{name:e,description:t,versions:r}=this.schemaUriToNameAndDescription.get(n);s.name=e,s.description=t,s.fromStore=!0,s.versions=r}e.push(s)}return e}resolveSchemaContent(e,t,r){return Tt(this,void 0,void 0,(function*(){const n=e.errors.slice(0);let s=e.schema;const i=this.contextService,o=(e,t,r,s)=>{const i=((e,t)=>{if(!t)return e;let r=e;return"/"===t[0]&&(t=t.substr(1)),t.split("/").some((e=>(r=r[e],!r))),r})(t,s);if(i)for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&!Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=i[t]);else n.push(Ot("json.schema.invalidref","$ref '{0}' in '{1}' can not be resolved.",s,r))},a=(e,t,r,s,a)=>{i&&!/^\w+:\/\/.*/.test(t)&&(t=i.resolveRelativePath(t,s)),t=this.normalizeId(t);const l=this.getOrAddSchemaHandle(t);return l.getUnresolvedSchema().then((s=>{if(a[t]=!0,s.errors.length){const e=r?t+"#"+r:t;n.push(Ot("json.schema.problemloadingref","Problems loading reference '{0}': {1}",e,s.errors[0]))}return o(e,s.schema,t,r),e.url=t,c(e,s.schema,t,l.dependencies)}))},c=(e,t,r,n)=>Tt(this,void 0,void 0,(function*(){if(!e||"object"!=typeof e)return null;const i=[e],c=[],l=[],u=e=>{const s=[];for(;e.$ref;){const i=e.$ref,c=i.split("#",2);if(e._$ref=e.$ref,delete e.$ref,c[0].length>0)return void l.push(a(e,c[0],c[1],r,n));-1===s.indexOf(i)&&(o(e,t,r,c[1]),s.push(i))}((...e)=>{for(const t of e)"object"==typeof t&&i.push(t)})(e.items,e.additionalItems,e.additionalProperties,e.not,e.contains,e.propertyNames,e.if,e.then,e.else),((...e)=>{for(const t of e)if("object"==typeof t)for(const e in t){const r=t[e];"object"==typeof r&&i.push(r)}})(e.definitions,e.properties,e.patternProperties,e.dependencies),((...e)=>{for(const t of e)if(Array.isArray(t))for(const e of t)"object"==typeof e&&i.push(e)})(e.anyOf,e.allOf,e.oneOf,e.items,e.schemaSequence)};if(r.indexOf("#")>0){const e=r.split("#",2);if(e[0].length>0&&e[1].length>0){const t={};yield a(t,e[0],e[1],r,n);for(const e in s)"required"!==e&&Object.prototype.hasOwnProperty.call(s,e)&&!Object.prototype.hasOwnProperty.call(t,e)&&(t[e]=s[e]);s=t}}for(;i.length;){const e=i.pop();c.indexOf(e)>=0||(c.push(e),u(e))}return Promise.all(l)}));return yield c(s,s,t,r),new B(s,n)}))}getSchemaForResource(e,t){const r=()=>{const r=Object.create(null),n=[];let s=function(e){if(e instanceof mt){const t=e.lineComments.find((e=>xt(e)));if(null!=t){const e=t.match(/\$schema=\S+/g);if(null!==e&&e.length>=1)return e.length>=2&&console.log("Several $schema attributes have been found on the yaml-language-server modeline. The first one will be picked."),e[0].substring("$schema=".length)}}}(t);if(void 0!==s){if(!s.startsWith("file:")&&!s.startsWith("http")){let t="";if(s.indexOf("#")>0){const e=s.split("#",2);s=e[0],t=e[1]}if(f.isAbsolute(s))s=u.o.file(s).toString();else{const t=u.o.parse(e);s=u.o.file(f.resolve(f.parse(t.fsPath).dir,s)).toString()}t.length>0&&(s+="#"+t)}this.addSchemaPriority(s,Ht.Modeline),n.push(s),r[s]=!0}for(const t of this.filePatternAssociations)if(t.matchesPattern(e))for(const e of t.getURIs())r[e]||(n.push(e),r[e]=!0);const i=this.normalizeId(e);if(this.schemasById[i]&&n.push(i),n.length>0){const r=this.highestPrioritySchemas(n),s=super.createCombinedSchema(e,r);return s.getResolvedSchema().then((e=>(e.schema&&"object"==typeof e.schema&&(e.schema.url=s.url),e.schema&&e.schema.schemaSequence&&e.schema.schemaSequence[t.currentDocIndex]?new B(e.schema.schemaSequence[t.currentDocIndex]):e)))}return Promise.resolve(null)};return this.customSchemaProvider?this.customSchemaProvider(e).then((e=>Array.isArray(e)?0===e.length?r():Promise.all(e.map((e=>this.resolveCustomSchema(e,t)))).then((e=>({errors:[],schema:{anyOf:e.map((e=>e.schema))}})),(()=>r())):e?this.resolveCustomSchema(e,t):r())).then((e=>e),(()=>r())):r()}addSchemaPriority(e,t){let r=this.schemaPriorityMapping.get(e);r?(r=r.add(t),this.schemaPriorityMapping.set(e,r)):this.schemaPriorityMapping.set(e,(new Set).add(t))}highestPrioritySchemas(e){let t=0;const r=new Map;return e.forEach((e=>{(this.schemaPriorityMapping.get(e)||[0]).forEach((n=>{n>t&&(t=n);let s=r.get(n);s?(s=s.concat(e),r.set(n,s)):r.set(n,[e])}))})),r.get(t)||[]}resolveCustomSchema(e,t){return Tt(this,void 0,void 0,(function*(){const r=yield this.loadSchema(e),n=yield this.resolveSchemaContent(r,e,[]);return n.schema&&(n.schema.url=e),n.schema&&n.schema.schemaSequence&&n.schema.schemaSequence[t.currentDocIndex]?new B(n.schema.schemaSequence[t.currentDocIndex]):n}))}saveSchema(e,t){return Tt(this,void 0,void 0,(function*(){const r=this.normalizeId(e);return this.getOrAddSchemaHandle(r,t),this.schemaPriorityMapping.set(r,(new Set).add(Ht.Settings)),Promise.resolve(void 0)}))}deleteSchemas(e){return Tt(this,void 0,void 0,(function*(){return e.schemas.forEach((e=>{this.deleteSchema(e)})),Promise.resolve(void 0)}))}deleteSchema(e){return Tt(this,void 0,void 0,(function*(){const t=this.normalizeId(e);return this.schemasById[t]&&delete this.schemasById[t],this.schemaPriorityMapping.delete(t),Promise.resolve(void 0)}))}addContent(e){return Tt(this,void 0,void 0,(function*(){const t=yield this.getResolvedSchema(e.schema);if(t){const r=this.resolveJSONSchemaToSection(t.schema,e.path);"object"==typeof r&&(r[e.key]=e.content),yield this.saveSchema(e.schema,t.schema)}}))}deleteContent(e){return Tt(this,void 0,void 0,(function*(){const t=yield this.getResolvedSchema(e.schema);if(t){const r=this.resolveJSONSchemaToSection(t.schema,e.path);"object"==typeof r&&delete r[e.key],yield this.saveSchema(e.schema,t.schema)}}))}resolveJSONSchemaToSection(e,t){const r=t.split("/");let n=e;for(const e of r)""!==e&&(this.resolveNext(n,e),n=n[e]);return n}resolveNext(e,t){if(Array.isArray(e)&&isNaN(t))throw new Error("Expected a number after the array object");if("object"==typeof e&&"string"!=typeof t)throw new Error("Expected a string after the object")}normalizeId(e){try{return u.o.parse(e).toString()}catch(t){return e}}getOrAddSchemaHandle(e,t){return super.getOrAddSchemaHandle(e,t)}loadSchema(e){const t=this.requestService;return super.loadSchema(e).then((r=>{if(r.errors&&void 0===r.schema)return t(e).then((t=>{if(!t){const t=Ot("json.schema.nocontent","Unable to load schema from '{0}': No content. {1}",Mt(e),r.errors);return new K({},[t])}try{const e=(0,m.Qc)(t);return new K(e,[])}catch(t){const r=Ot("json.schema.invalidFormat","Unable to parse content from '{0}': {1}.",Mt(e),t);return new K({},[r])}}),(e=>{let t=e.toString();const r=e.toString().split("Error: ");return r.length>1&&(t=r[1]),new K({},[t])}));if(r.uri=e,this.schemaUriToNameAndDescription.has(e)){const{name:t,description:n,versions:s}=this.schemaUriToNameAndDescription.get(e);r.schema.title=null!=t?t:r.schema.title,r.schema.description=null!=n?n:r.schema.description,r.schema.versions=null!=s?s:r.schema.versions}return r}))}registerExternalSchema(e,t,r,n,s,i){return(n||s)&&this.schemaUriToNameAndDescription.set(e,{name:n,description:s,versions:i}),super.registerExternalSchema(e,t,r)}clearExternalSchemas(){super.clearExternalSchemas()}setSchemaContributions(e){super.setSchemaContributions(e)}getRegisteredSchemaIds(e){return super.getRegisteredSchemaIds(e)}getResolvedSchema(e){return super.getResolvedSchema(e)}onResourceChange(e){return super.onResourceChange(e)}};function Mt(e){try{const t=u.o.parse(e);if("file"===t.scheme)return t.fsPath}catch(e){}return e}function Pt(e,t){for(const r of e)r.isKubernetes=t}function jt(e){if(e)return e.replace(/([^\n\r])(\r?\n)([^\n\r])/gm,"$1\n\n$3").replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}function Vt(e){for(const t of e.start)if("anchor"===t.type)return t;if(e.sep&&Array.isArray(e.sep))for(const t of e.sep)if("anchor"===t.type)return t}var Ct,kt=(e,t)=>{const r=t.positionAt(e.location.start),n={start:r,end:e.location.toLineEnd?h.Ly.create(r.line,new vt(t).getLineLength(r.line)):t.positionAt(e.location.end)};return h.R9.create(n,e.message,e.severity,e.code,Re)};function It(e,t){if(!e)return;const r=[],n=pt.getYamlDocument(e);for(const t of n.documents)n.documents.length>1&&r.push($t(e,t.root)),t.visit((t=>{var n;if("object"===t.type&&"array"===(null===(n=t.parent)||void 0===n?void 0:n.type)&&r.push($t(e,t)),"property"===t.type&&t.valueNode)switch(t.valueNode.type){case"array":case"object":r.push($t(e,t));break;case"string":{const n=e.positionAt(t.offset),s=e.positionAt(t.valueNode.offset+t.valueNode.length);n.line!==s.line&&r.push($t(e,t));break}default:return!0}return!0}));const s=t&&t.rangeLimit;return"number"!=typeof s||r.length<=s?r:(t&&t.onRangeLimitExceeded&&t.onRangeLimitExceeded(e.uri),r.slice(0,t.rangeLimit))}function $t(e,t){const r=e.positionAt(t.offset);let n=e.positionAt(t.offset+t.length);const s=e.getText(h.e6.create(r,n)),i=s.length-s.trimRight().length;return i>0&&(n=e.positionAt(t.offset+t.length-i)),h.so.create(r.line,n.line,r.character,n.character)}function Ft(e,t){const r={};return r[e]=t,{changes:r}}(Ct||(Ct={})).JUMP_TO_SCHEMA="jumpToSchema";var Nt=new class{constructor(){this.commands=new Map}executeCommand(e){if(this.commands.has(e.command))return this.commands.get(e.command)(...e.arguments);throw new Error(`Command '${e.command}' not found`)}registerCommand(e,t){this.commands.set(e,t)}};function Et(e,t){const{position:r}=t,n=new vt(e);if("\n"===t.ch){const e=n.getLineContent(r.line-1);if(e.trimRight().endsWith(":")){const s=n.getLineContent(r.line),i=s.substring(r.character,s.length),o=-1!==e.indexOf(" - ");if(0===i.trimRight().length){const n=r.character-(e.length-e.trimLeft().length);if(n===t.options.tabSize&&!o)return;const i=[];return s.length>0&&i.push(h.PY.del(h.e6.create(r,h.Ly.create(r.line,s.length-1)))),i.push(h.PY.insert(r," ".repeat(t.options.tabSize+(o?2-n:0)))),i}if(o)return[h.PY.insert(r," ".repeat(t.options.tabSize))]}if(e.trimRight().endsWith("|"))return[h.PY.insert(r," ".repeat(t.options.tabSize))];if(e.includes(" - ")&&!e.includes(": "))return[h.PY.insert(r,"- ")];if(e.includes(" - ")&&e.includes(": "))return[h.PY.insert(r,"  ")]}}function Dt(e){const t=new Map;return e?(e.url?e.url.startsWith("schemaservice://combinedSchema/")?Rt(e,t):t.set(e.url,e):Rt(e,t),t):t}function Rt(e,t){e.allOf&&Wt(e.allOf,t),e.anyOf&&Wt(e.anyOf,t),e.oneOf&&Wt(e.oneOf,t)}function Wt(e,t){for(const r of e)re(r)||r.url&&!t.has(r.url)&&t.set(r.url,r)}function Lt(e,t){const r=u.o.parse(e);let n=f.basename(r.fsPath);return f.extname(r.fsPath)||(n+=".json"),Object.getOwnPropertyDescriptor(t,"name")?Object.getOwnPropertyDescriptor(t,"name").value+` (${n})`:t.title?t.title+` (${n})`:n}function Ut(e,t,r,n,s){let i;for(s.spacesDiff=0,s.looksLikeAlignment=!1,i=0;i<t&&i<n&&e.charCodeAt(i)===r.charCodeAt(i);i++);let o=0,a=0;for(let r=i;r<t;r++)32===e.charCodeAt(r)?o++:a++;let c=0,l=0;for(let e=i;e<n;e++)32===r.charCodeAt(e)?c++:l++;if(o>0&&a>0)return;if(c>0&&l>0)return;const u=Math.abs(a-l),h=Math.abs(o-c);if(0===u)return s.spacesDiff=h,void(h>0&&0<=c-1&&c-1<e.length&&c<r.length&&32!==r.charCodeAt(c)&&32===e.charCodeAt(c-1)&&44===e.charCodeAt(e.length-1)&&(s.looksLikeAlignment=!0));h%u!=0||(s.spacesDiff=h/u)}function _t(e,t,r,n,s=0,i=0){if(null!==e&&"object"==typeof e){const o=0===s&&n.shouldIndentWithTab||s>0?t+n.indentation:"";if(Array.isArray(e)){if(i+=1,0===e.length)return"";let a="";for(let c=0;c<e.length;c++){let l=e[c];"object"==typeof e[c]?(Array.isArray(e[c])||(l=qt(e[c],i)),a+=_t(l,t,r,n,s+=1,i)):a+="\n"+o+"- "+r(e[c])}return a}{const i=Object.keys(e);if(0===i.length)return"";let a=0===s&&n.newLineFirst||s>0?"\n":"";for(let c=0;c<i.length;c++){const l=i[c],u="object"==typeof e[l],h=u?":":": ",m=o+(u&&/^\s|-/.test(l)?n.indentation:"");0!==s||0!==c||n.indentFirstObject?a+=o+l+h+_t(e[l],m,r,n,s+=1,0):a+=t+l+h+_t(e[l],m,r,n,s+=1,0),c<i.length-1&&(a+="\n")}return a}}return r(e)}function qt(e,t){const r={};for(let n=0;n<Object.keys(e).length;n++){const s=Object.keys(e)[n];0===n?r["- ".repeat(t)+s]=e[s]:r["  ".repeat(t)+s]=e[s]}return r}var Ht,Kt,Bt=O(),Gt=/[\\]+"/g,Jt=h.cm.Class,Yt=/^\d+$/;function zt(e){let t;if(t="string"==typeof e?e:""+e,0===t.length)return t;if("true"===t||"false"===t||"null"===t||Yt.test(t))return`"${t}"`;-1!==t.indexOf('"')&&(t=t.replace(Gt,'"'));let r="@"===t.charAt(0);if(!r){let e=t.indexOf(":",0);for(;e>0&&e<t.length;e=t.indexOf(":",e+1)){if(e===t.length-1){r=!0;break}const n=t.charAt(e+1);if("\t"===n||" "===n){r=!0;break}}}return r&&(t=`"${t}"`),t}function Zt(){}function Xt(e,t,s,i,o,a){const c=new wt(e,t),l=new class{constructor(e,t={},r,n){this.schemaService=e,this.clientCapabilities=t,this.yamlDocument=r,this.telemetry=n,this.completionEnabled=!0,this.arrayPrefixIndentation=""}configure(e){e&&(this.completionEnabled=e.completion),this.customTags=e.customTags,this.yamlVersion=e.yamlVersion,this.configuredIndentation=e.indentation,this.disableDefaultProperties=e.disableDefaultProperties,this.parentSkeletonSelectedFirst=e.parentSkeletonSelectedFirst}doComplete(e,t,r=!1){return n=this,s=void 0,o=function*(){const n=h.Ub.create([],!1);if(!this.completionEnabled)return n;const s=this.yamlDocument.getYamlDocument(e,{customTags:this.customTags,yamlVersion:this.yamlVersion},!0),i=new vt(e);if(this.configuredIndentation)this.indentation=this.configuredIndentation;else{const e=function(e,t,r){const n=Math.min(e.getLineCount(),1e4);let s=0,i=0,o="",a=0;const c=[2,4,6,8,3,5,7],l=[0,0,0,0,0,0,0,0,0],u=new class{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}};for(let t=1;t<=n;t++){const r=e.getLineLength(t),n=e.getLineContent(t),c=r<=65536;let h=!1,m=0,f=0,p=0;for(let s=0,i=r;s<i;s++){const r=c?n.charCodeAt(s):e.getLineCharCode(t,s);if(9===r)p++;else{if(32!==r){h=!0,m=s;break}f++}}if(!h)continue;if(p>0?s++:f>1&&i++,Ut(o,a,n,m,u),u.looksLikeAlignment&&2!==u.spacesDiff)continue;const d=u.spacesDiff;d<=8&&l[d]++,o=n,a=m}let h=!0;s!==i&&(h=s<i);let m=2;if(h){let e=h?0:.1*n;c.forEach((t=>{const r=l[t];r>e&&(e=r,m=t)})),4===m&&l[4]>0&&l[2]>0&&l[2]>=l[4]/2&&(m=2)}return{insertSpaces:h,tabSize:m}}(i);this.indentation=e.insertSpaces?" ".repeat(e.tabSize):"\t"}Pt(s.documents,r);const o=e.offsetAt(t),a=e.getText();if(":"===a.charAt(o-1))return Promise.resolve(n);let c=ke(o,s);if(null===c)return Promise.resolve(n);c=c.clone();let[l,u]=c.getNodeFromPosition(o,i,this.indentation.length);const f=this.getCurrentWord(e,o);this.arrayPrefixIndentation="";let p=null;if(l&&(0,m.jF)(l)&&"null"===l.value){const t=e.positionAt(l.range[0]);t.character+=1;const r=e.positionAt(l.range[2]);r.character+=1,p=h.e6.create(t,r)}else if(l&&(0,m.jF)(l)&&l.value){const t=e.positionAt(l.range[0]);o>0&&t.character>0&&"-"===a.charAt(o-1)&&(t.character-=1),p=h.e6.create(t,e.positionAt(l.range[1]))}else if(l&&(0,m.jF)(l)&&null===l.value&&"-"===f)p=h.e6.create(t,t),this.arrayPrefixIndentation=" ";else{let r=e.offsetAt(t)-f.length;r>0&&'"'===a[r-1]&&r--,p=h.e6.create(e.positionAt(r),t)}const d={},g="__",y={add:e=>{const t=!!e.parent;let r=e.label;if(!r)return void console.warn(`Ignoring CompletionItem without label: ${JSON.stringify(e)}`);if(ne(r)||(r=String(r)),r=r.replace(/[\n]/g,"↵"),r.length>60){const e=r.substr(0,57).trim()+"...";d[e]||(r=e)}if(e.insertText.endsWith("$1")&&!t&&(e.insertText=e.insertText.substr(0,e.insertText.length-2)),p&&p.start.line===p.end.line&&(e.textEdit=h.PY.replace(p,e.insertText)),e.label=r,t)return void function(e){var t;if((null===(t=d[e.label])||void 0===t?void 0:t.label)===g)return;const r=e.parent.schema,s=ie(r),i=r.markdownDescription||r.description;let o=n.items.find((e=>{var t;return(null===(t=e.parent)||void 0===t?void 0:t.schema)===r&&e.kind===Jt}));o&&o.parent.insertTexts.includes(e.insertText)||(o?o.parent.insertTexts.push(e.insertText):(o=Object.assign(Object.assign({},e),{label:s,documentation:i,sortText:"_"+s,kind:Jt}),o.parent.insertTexts=[e.insertText],n.items.push(o)))}(e);this.arrayPrefixIndentation&&this.updateCompletionText(e,this.arrayPrefixIndentation+e.insertText);const s=d[r],i=(null==s?void 0:s.label)!==g&&(null==s?void 0:s.insertText)!==e.insertText;if(s){if(i){const t=this.mergeSimpleInsertTexts(r,s.insertText,e.insertText);t?this.updateCompletionText(s,t):(d[r]=e,n.items.push(e))}}else d[r]=e,n.items.push(e);s&&!s.documentation&&e.documentation&&(s.documentation=e.documentation)},error:e=>{this.telemetry.sendError("yaml.completion.error",{error:se(e)})},log:e=>{console.log(e)},getNumberOfProposals:()=>n.items.length};this.customTags.length>0&&this.getCustomTagValueCompletions(y);let v=i.getLineContent(t.line);v.endsWith("\n")&&(v=v.substr(0,v.length-1));try{const r=yield this.schemaService.getSchemaForResource(e.uri,c);if((!r||r.errors.length)&&0===t.line&&0===t.character&&!xt(v)){const e={kind:h.cm.Text,label:"Inline schema",insertText:"# yaml-language-server: $schema=",insertTextFormat:h.lO.PlainText};n.items.push(e)}if(xt(v)||function(e,t){let r=!1;for(const n of e){if("document"===n.type)ht([],n,(e=>{var s;if(ut(e)&&"comment"===(null===(s=e.value)||void 0===s?void 0:s.type)){if(n.offset<=t&&e.value.source.length+e.value.offset>=t)return r=!0,m.Vn.BREAK}else if("comment"===e.type&&e.offset<=t&&e.offset+e.source.length>=t)return r=!0,m.Vn.BREAK}));else if("comment"===n.type&&n.offset<=t&&n.source.length+n.offset>=t)return!0;if(r)break}return r}(s.tokens,o)){const e=v.indexOf("$schema=");return-1!==e&&e+"$schema=".length<=t.character&&this.schemaService.getAllSchemas().forEach((e=>{var t;const r={kind:h.cm.Constant,label:null!==(t=e.name)&&void 0!==t?t:e.uri,detail:e.description,insertText:e.uri,insertTextFormat:h.lO.PlainText,insertTextMode:h.DM.asIs};n.items.push(r)})),n}if(!r||r.errors.length)return n;let b=null;if(!l)if(!c.internalDocument.contents||(0,m.jF)(c.internalDocument.contents)){const e=c.internalDocument.createNode({});e.range=[o,o+1,o+1],c.internalDocument.contents=e,c.internalDocument=c.internalDocument,l=e}else l=c.findClosestNode(o,i),u=!0;let x=l;if(l){if((0,m._N)(l)&&l.items.length&&(0,m.vG)(l.items[0])){const e=l.items[0];(0,m.jF)(e.value)&&(0,m.jF)(e.key)&&null===e.value.value&&e.key.range[2]<o&&e.value.range[0]>o&&(l=e.value,p.end.character+=e.value.range[2]-o)}if((0,m.xw)(l)&&l.items.length&&(0,m.jF)(l.items[0])&&v.includes("-")){const e=l.items[0];null===e.value&&e.range[0]>o&&(l=e,x=l,p.end.character+=e.range[2]-o)}if(0===v.length)l=c.internalDocument.contents;else{const r=c.getParent(l);if(r){if((0,m.jF)(l)){if(l.value){if((0,m.vG)(r)){if(r.value===l){if(v.trim().length>0&&v.indexOf(":")<0){const e=this.createTempObjNode(f,l,c);if((0,m.xw)(c.internalDocument.contents)){const t=function(e,t){for(const[r,n]of e.items.entries())if(t===n)return r}(c.internalDocument.contents,r);"number"==typeof t&&(c.internalDocument.set(t,e),c.internalDocument=c.internalDocument)}else c.internalDocument.set(r.key,e),c.internalDocument=c.internalDocument;b=e.items[0],l=e}else if(0===v.trim().length){const e=c.getParent(r);e&&(l=e)}}else if(r.key===l){const e=c.getParent(r);b=r,e&&(l=e)}}else if((0,m.xw)(r))if(v.trim().length>0){const e=this.createTempObjNode(f,l,c);r.delete(l),r.add(e),c.internalDocument=c.internalDocument,l=e}else l=r}else if(null===l.value)if((0,m.vG)(r)){if(r.key===l)l=r;else if((0,m.UG)(r.key)&&r.key.range){const n=c.getParent(r);if(u&&n&&(0,m._N)(n)&&function(e){if(e.items.length>1)return!1;const t=e.items[0];return!(!(0,m.jF)(t.key)||!(0,m.jF)(t.value)||""!==t.key.value||t.value.value)}(n))l=n;else{const s=e.positionAt(r.key.range[0]);if(t.character>s.character&&t.line!==s.line){const e=this.createTempObjNode(f,l,c);n&&((0,m._N)(n)||(0,m.xw)(n))?(n.set(r.key,e),c.internalDocument=c.internalDocument):(c.internalDocument.set(r.key,e),c.internalDocument=c.internalDocument),b=e.items[0],l=e}else s.character===t.character&&n&&(l=n)}}}else if((0,m.xw)(r))if("-"!==v.charAt(t.character-1)){const e=this.createTempObjNode(f,l,c);r.delete(l),r.add(e),c.internalDocument=c.internalDocument,l=e}else if("-"===v.charAt(t.character-1)){const e=this.createTempObjNode("",l,c);r.delete(l),r.add(e),c.internalDocument=c.internalDocument,l=e}else l=r}else if((0,m._N)(l)&&!u&&0===v.trim().length&&(0,m.xw)(r)){const e=i.getLineContent(t.line+1);i.getLineCount()!==t.line+1&&0!==e.trim().length||(l=r)}}else if((0,m.jF)(l)){const e=this.createTempObjNode(f,l,c);c.internalDocument.contents=e,c.internalDocument=c.internalDocument,b=e.items[0],l=e}else if((0,m._N)(l))for(const e of l.items)(0,m.UG)(e.value)&&e.value.range&&e.value.range[0]===o+1&&(l=e.value)}}if(l&&(0,m._N)(l)){const e=l.items;for(const t of e)b&&b===t||(0,m.jF)(t.key)&&(d[t.key.value+""]=h.FG.create(g));this.addPropertyCompletions(r,c,l,x,"",y,i,p),!r&&f.length>0&&'"'!==a.charAt(o-f.length-1)&&y.add({kind:h.cm.Property,label:f,insertText:this.getInsertTextForProperty(f,null,""),insertTextFormat:h.lO.Snippet})}const S={};this.getValueCompletions(r,c,l,o,e,y,S)}catch(e){this.telemetry.sendError("yaml.completion.error",{error:se(e)})}return this.finalizeParentCompletion(n),n},new((i=void 0)||(i=Promise))((function(e,t){function r(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,a)}c((o=o.apply(n,s||[])).next())}));var n,s,i,o}updateCompletionText(e,t){e.insertText=t,e.textEdit&&(e.textEdit.newText=t)}mergeSimpleInsertTexts(e,t,r){const n=e=>e.includes("\n");if(n(t)||n(r))return;const s=this.getValuesFromInsertText(t),i=this.getValuesFromInsertText(r),o=Array.prototype.concat(s,i);return o.length?1===o.length?`${e}: \${1:${o[0]}}`:`${e}: \${1|${o.join(",")}|}`:void 0}getValuesFromInsertText(e){const t=e.substring(e.indexOf(":")+1).trim();if(!t)return[];const r=t.match(/^\${1[|:]([^|]*)+\|?}$/);return r?r[1].split(","):[t]}finalizeParentCompletion(e){e.items.forEach((e=>{if("parent"in e){const t=e.parent.indent||"";let r=(e=>{let t=0;return e.map((e=>{const r=e.match(/\$([0-9]+)|\${[0-9]+:/g);if(!r)return e;const n=r.map((e=>+e.replace(/\${([0-9]+)[:|]/g,"$1").replace("$",""))).reduce(((e,t)=>t>e?t:e),0),s=e.replace(/\$([0-9]+)/g,((e,r)=>"$"+(+r+t))).replace(/\${([0-9]+)[:|]/g,((e,r)=>"${"+(+r+t)+":"));return t+=n,s}))})(e.parent.insertTexts).join(`\n${t}`);r.endsWith("$1")&&(r=r.substring(0,r.length-2)),e.insertText=this.arrayPrefixIndentation+r,e.textEdit&&(e.textEdit.newText=e.insertText);const n=r.replace(/\${[0-9]+[:|](.*)}/g,((e,t)=>t)).replace(/\$([0-9]+)/g,""),s=e.documentation?[e.documentation,"","----",""]:[];e.documentation={kind:h.a4.Markdown,value:[...s,"```yaml",t+n,"```"].join("\n")},delete e.parent}}))}createTempObjNode(e,t,r){const n={};n[e]=null;const s=r.internalDocument.createNode(n);return s.range=t.range,s.items[0].key.range=t.range,s.items[0].value.range=t.range,s}addPropertyCompletions(e,t,r,n,s,i,o,a){var c,l;const u=t.getMatchingSchemas(e.schema),f=o.getText(a),p=o.getLineContent(a.start.line),d=0===p.trim().length,g=-1!==p.indexOf(":"),y=t.getParent(r),v=u.find((e=>e.node.internalNode===n&&e.schema.properties));for(const e of u){if((e.node.internalNode===r&&!v||e.node.internalNode===n)&&!e.inverted){this.collectDefaultSnippets(e.schema,s,i,{newLineFirst:!1,indentFirstObject:!1,shouldIndentWithTab:!1});const t=e.schema.properties;if(t){const u=e.schema.maxProperties;if(void 0===u||void 0===r.items||r.items.length<u||r.items.length===u&&!d)for(const u in t)if(Object.prototype.hasOwnProperty.call(t,u)){const p=t[u];if("object"==typeof p&&!p.deprecationMessage&&!p.doNotSuggest){let t,v="";if(y&&(0,m.xw)(y)&&r.items.length<=1&&!d){const e=o.getText(),t=e.lastIndexOf("-",r.range[0]-1);if(t>=0){const n=a.end.character-a.start.character;v=" "+e.slice(t+1,r.range[1]-n)}}if(v+=this.arrayPrefixIndentation,"array"===p.type&&(t=r.items.find((e=>(0,m.jF)(e.key)&&e.key.range&&e.key.value===u&&(0,m.jF)(e.value)&&!e.value.value&&o.getPosition(e.key.range[2]).line===a.end.line-1)))&&t)if(Array.isArray(p.items))this.addSchemaValueCompletions(p.items[0],s,i,{});else if("object"==typeof p.items&&"object"===p.items.type){const e=`- ${this.getInsertTextForObject(p.items,s,"  ").insertText.trimLeft()}`,t=this.getDocumentationWithMarkdownText("Create an item of an array"+(p.description?" ("+p.description+")":""),e);i.add({kind:this.getSuggestionKind(p.items.type),label:"- (array item)",documentation:t,insertText:e,insertTextFormat:h.lO.Snippet})}let b=u;u.startsWith(f)&&g||(b=this.getInsertTextForProperty(u,p,s,v+this.indentation));const x=(0,m.jF)(n)&&null===n.value||(0,m._N)(n)&&0===n.items.length,S=(null===(c=e.schema.required)||void 0===c?void 0:c.length)>0;this.parentSkeletonSelectedFirst&&x&&S||i.add({kind:h.cm.Property,label:u,insertText:b,insertTextFormat:h.lO.Snippet,documentation:this.fromMarkup(p.markdownDescription)||p.description||""}),(null===(l=e.schema.required)||void 0===l?void 0:l.includes(u))&&i.add({label:u,insertText:this.getInsertTextForProperty(u,p,s,v+this.indentation),insertTextFormat:h.lO.Snippet,documentation:this.fromMarkup(p.markdownDescription)||p.description||"",parent:{schema:e.schema,indent:v}})}}}if(y&&(0,m.xw)(y)&&"object"!==e.schema.type&&this.addSchemaValueCompletions(e.schema,s,i,{},Array.isArray(y.items)),e.schema.propertyNames&&e.schema.additionalProperties&&"object"===e.schema.type){const t=Ye(e.schema.propertyNames),r=t.title||"property";i.add({kind:h.cm.Property,label:r,insertText:`\${1:${r}}: `,insertTextFormat:h.lO.Snippet,documentation:this.fromMarkup(t.markdownDescription)||t.description||""})}}y&&e.node.internalNode===y&&e.schema.defaultSnippets&&(1===r.items.length?this.collectDefaultSnippets(e.schema,s,i,{newLineFirst:!1,indentFirstObject:!1,shouldIndentWithTab:!0},1):this.collectDefaultSnippets(e.schema,s,i,{newLineFirst:!1,indentFirstObject:!0,shouldIndentWithTab:!1},1))}}getValueCompletions(e,t,r,n,s,i,o){let a=null;if(r&&(0,m.jF)(r)&&(r=t.getParent(r)),r){if((0,m.vG)(r)){const e=r.value;if(e&&e.range&&n>e.range[0]+e.range[2])return;a=(0,m.jF)(r.key)?r.key.value+"":null,r=t.getParent(r)}if(r&&(null!==a||(0,m.xw)(r))){const c="",l=t.getMatchingSchemas(e.schema);for(const e of l)if(e.node.internalNode===r&&!e.inverted&&e.schema){if(e.schema.items&&(this.collectDefaultSnippets(e.schema,c,i,{newLineFirst:!1,indentFirstObject:!1,shouldIndentWithTab:!1}),(0,m.xw)(r)&&r.items))if(Array.isArray(e.schema.items)){const t=this.findItemAtOffset(r,s,n);t<e.schema.items.length&&this.addSchemaValueCompletions(e.schema.items[t],c,i,o)}else if("object"==typeof e.schema.items&&"object"===e.schema.items.type){const t=`- ${this.getInsertTextForObject(e.schema.items,c,"  ").insertText.trimLeft()}`,r=this.getDocumentationWithMarkdownText("Create an item of an array"+(e.schema.description?" ("+e.schema.description+")":""),t);i.add({kind:this.getSuggestionKind(e.schema.items.type),label:"- (array item)",documentation:r,insertText:t,insertTextFormat:h.lO.Snippet}),this.addSchemaValueCompletions(e.schema.items,c,i,o)}else"object"==typeof e.schema.items&&e.schema.items.anyOf?(e.schema.items.anyOf.filter((e=>"object"==typeof e)).forEach(((t,r)=>{const n=ie(t),s=`- ${this.getInsertTextForObject(t,c).insertText.trimLeft()}`,o=n?" type `"+n+"`":"",a=e.schema.description?" ("+e.schema.description+")":"",l=this.getDocumentationWithMarkdownText(`Create an item of an array${o}${a}`,s);i.add({kind:this.getSuggestionKind(t.type),label:"- (array item) "+(n||r+1),documentation:l,insertText:s,insertTextFormat:h.lO.Snippet})})),this.addSchemaValueCompletions(e.schema.items,c,i,o)):this.addSchemaValueCompletions(e.schema.items,c,i,o);if(e.schema.properties){const t=e.schema.properties[a];t&&this.addSchemaValueCompletions(t,c,i,o)}else e.schema.additionalProperties&&this.addSchemaValueCompletions(e.schema.additionalProperties,c,i,o)}o.boolean&&(this.addBooleanValueCompletion(!0,c,i),this.addBooleanValueCompletion(!1,c,i)),o.null&&this.addNullValueCompletion(c,i)}}else this.addSchemaValueCompletions(e.schema,"",i,o)}getInsertTextForProperty(e,t,r,n=this.indentation){const s=this.getInsertTextForValue(e,"","string"),i=s+":";let o,a=0;if(t){let e=Array.isArray(t.type)?t.type[0]:t.type;if(e||(t.properties?e="object":t.items?e="array":t.anyOf&&(e="anyOf")),Array.isArray(t.defaultSnippets)){if(1===t.defaultSnippets.length){const e=t.defaultSnippets[0].body;te(e)&&(o=this.getInsertTextForSnippetValue(e,"",{newLineFirst:!0,indentFirstObject:!1,shouldIndentWithTab:!1},1),o.startsWith(" ")||o.startsWith("\n")||(o=" "+o))}a+=t.defaultSnippets.length}if(t.enum&&(o||1!==t.enum.length||(o=" "+this.getInsertTextForGuessedValue(t.enum[0],"",e)),a+=t.enum.length),t.const&&(o||(o=this.getInsertTextForGuessedValue(t.const,"",e),o=function(e){return e.replace(/\$\{1:(.*)\}/,"$1")}(o),o=" "+o),a++),te(t.default)&&(o||(o=" "+this.getInsertTextForGuessedValue(t.default,"",e)),a++),Array.isArray(t.examples)&&t.examples.length&&(o||(o=" "+this.getInsertTextForGuessedValue(t.examples[0],"",e)),a+=t.examples.length),t.properties)return`${i}\n${this.getInsertTextForObject(t,r,n).insertText}`;if(t.items)return`${i}\n${n}- ${this.getInsertTextForArray(t.items,r,1,n).insertText}`;if(0===a)switch(e){case"boolean":case"string":case"anyOf":o=" $1";break;case"object":o=`\n${n}`;break;case"array":o=`\n${n}- `;break;case"number":case"integer":o=" ${1:0}";break;case"null":o=" ${1:null}";break;default:return s}}return(!o||a>1)&&(o=" $1"),i+o+r}getInsertTextForObject(e,t,r=this.indentation,n=1){let s="";return e.properties?(Object.keys(e.properties).forEach((i=>{const o=e.properties[i];let a=Array.isArray(o.type)?o.type[0]:o.type;if(a||(o.anyOf&&(a="anyOf"),o.properties&&(a="object"),o.items&&(a="array")),e.required&&e.required.indexOf(i)>-1)switch(a){case"boolean":case"string":case"number":case"integer":case"anyOf":{let e=o.default||o.const;e?("string"===a&&(e=zt(e)),s+=`${r}${i}: \${${n++}:${e}}\n`):s+=`${r}${i}: $${n++}\n`;break}case"array":{const e=this.getInsertTextForArray(o.items,t,n++,r),a=e.insertText.split("\n");let c=e.insertText;if(a.length>1){for(let e=1;e<a.length;e++){const t=a[e];a[e]=`${r}${this.indentation}  ${t.trimLeft()}`}c=a.join("\n")}n=e.insertIndex,s+=`${r}${i}:\n${r}${this.indentation}- ${c}\n`}break;case"object":{const e=this.getInsertTextForObject(o,t,`${r}${this.indentation}`,n++);n=e.insertIndex,s+=`${r}${i}:\n${e.insertText}\n`}}else if(!this.disableDefaultProperties&&void 0!==o.default)switch(a){case"boolean":case"number":case"integer":s+=`${r}${i}: \${${n++}:${o.default}}\n`;break;case"string":s+=`${r}${i}: \${${n++}:${zt(o.default)}}\n`}})),0===s.trim().length&&(s=`${r}$${n++}\n`),s=s.trimRight()+t,{insertText:s,insertIndex:n}):(s=`${r}$${n++}\n`,{insertText:s,insertIndex:n})}getInsertTextForArray(e,t,r=1,n=this.indentation){let s="";if(!e)return s="$"+r++,{insertText:s,insertIndex:r};let i=Array.isArray(e.type)?e.type[0]:e.type;switch(i||(e.properties&&(i="object"),e.items&&(i="array")),e.type){case"boolean":s=`\${${r++}:false}`;break;case"number":case"integer":s=`\${${r++}:0}`;break;case"string":s=`\${${r++}:""}`;break;case"object":{const i=this.getInsertTextForObject(e,t,`${n}  `,r++);s=i.insertText.trimLeft(),r=i.insertIndex}}return{insertText:s,insertIndex:r}}getInsertTextForGuessedValue(e,t,r){switch(typeof e){case"object":return null===e?"${1:null}"+t:this.getInsertTextForValue(e,t,r);case"string":{let n=JSON.stringify(e);return n=n.substr(1,n.length-2),n=this.getInsertTextForPlainText(n),"string"===r&&(n=zt(n)),"${1:"+n+"}"+t}case"number":case"boolean":return"${1:"+e+"}"+t}return this.getInsertTextForValue(e,t,r)}getInsertTextForPlainText(e){return e.replace(/[\\$}]/g,"\\$&")}getInsertTextForValue(e,t,r){if(null===e&&(e="null"),"object"==typeof e){const r=this.indentation;return this.getInsertTemplateForValue(e,r,{index:1},t)}return"string"===(r=Array.isArray(r)?r[0]:r)&&(e=zt(e)),this.getInsertTextForPlainText(e+t)}getInsertTemplateForValue(e,t,r,n){if(Array.isArray(e)){let n="\n";for(const s of e)n+=`${t}- \${${r.index++}:${s}}\n`;return n}if("object"==typeof e){let s="\n";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];let a;s+=`${t}\${${r.index++}:${i}}:`,a="object"==typeof o?`${this.getInsertTemplateForValue(o,t+this.indentation,r,n)}`:` \${${r.index++}:${this.getInsertTextForPlainText(o+n)}}\n`,s+=`${a}`}return s}return this.getInsertTextForPlainText(e+n)}addSchemaValueCompletions(e,t,r,n,s){"object"==typeof e&&(this.addEnumValueCompletions(e,t,r,s),this.addDefaultValueCompletions(e,t,r),this.collectTypes(e,n),Array.isArray(e.allOf)&&e.allOf.forEach((e=>this.addSchemaValueCompletions(e,t,r,n))),Array.isArray(e.anyOf)&&e.anyOf.forEach((e=>this.addSchemaValueCompletions(e,t,r,n))),Array.isArray(e.oneOf)&&e.oneOf.forEach((e=>this.addSchemaValueCompletions(e,t,r,n))))}collectTypes(e,t){if(Array.isArray(e.enum)||te(e.const))return;const r=e.type;Array.isArray(r)?r.forEach((function(e){return t[e]=!0})):r&&(t[r]=!0)}addDefaultValueCompletions(e,t,r,n=0){let s=!1;if(te(e.default)){let i,o=e.type,a=e.default;for(let e=n;e>0;e--)a=[a],o="array";i="object"==typeof a?"Default value":a.toString().replace(Gt,'"'),r.add({kind:this.getSuggestionKind(o),label:i,insertText:this.getInsertTextForValue(a,t,o),insertTextFormat:h.lO.Snippet,detail:Bt("json.suggest.default","Default value")}),s=!0}Array.isArray(e.examples)&&e.examples.forEach((i=>{let o=e.type,a=i;for(let e=n;e>0;e--)a=[a],o="array";r.add({kind:this.getSuggestionKind(o),label:this.getLabelForValue(a),insertText:this.getInsertTextForValue(a,t,o),insertTextFormat:h.lO.Snippet}),s=!0})),this.collectDefaultSnippets(e,t,r,{newLineFirst:!0,indentFirstObject:!0,shouldIndentWithTab:!0}),s||"object"!=typeof e.items||Array.isArray(e.items)||this.addDefaultValueCompletions(e.items,t,r,n+1)}addEnumValueCompletions(e,t,r,n){if(te(e.const)&&!n&&r.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(e.const),insertText:this.getInsertTextForValue(e.const,t,e.type),insertTextFormat:h.lO.Snippet,documentation:this.fromMarkup(e.markdownDescription)||e.description}),Array.isArray(e.enum))for(let n=0,s=e.enum.length;n<s;n++){const s=e.enum[n];let i=this.fromMarkup(e.markdownDescription)||e.description;e.markdownEnumDescriptions&&n<e.markdownEnumDescriptions.length&&this.doesSupportMarkdown()?i=this.fromMarkup(e.markdownEnumDescriptions[n]):e.enumDescriptions&&n<e.enumDescriptions.length&&(i=e.enumDescriptions[n]),r.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(s),insertText:this.getInsertTextForValue(s,t,void 0),insertTextFormat:h.lO.Snippet,documentation:i})}}getLabelForValue(e){return null===e?"null":Array.isArray(e)?JSON.stringify(e):""+e}collectDefaultSnippets(e,t,r,n,s=0){if(Array.isArray(e.defaultSnippets))for(const i of e.defaultSnippets){let o,a,c=e.type,l=i.body,u=i.label;if(te(l)){const r=i.type||e.type;if(0===s&&"array"===r){const e={};Object.keys(l).forEach(((t,r)=>{0!==r||t.startsWith("-")?e[`  ${t}`]=l[t]:e[`- ${t}`]=l[t]})),l=e}o=this.getInsertTextForSnippetValue(l,t,n),u=u||this.getLabelForSnippetValue(l)}else if("string"==typeof i.bodyText){let e="",r="",n="";for(let t=s;t>0;t--)e=e+n+"[\n",r=r+"\n"+n+"]",n+=this.indentation,c="array";o=e+n+i.bodyText.split("\n").join("\n"+n)+r+t,u=u||o,a=o.replace(/[\n]/g,"")}r.add({kind:i.suggestionKind||this.getSuggestionKind(c),label:u,sortText:i.sortText||i.label,documentation:this.fromMarkup(i.markdownDescription)||i.description,insertText:o,insertTextFormat:h.lO.Snippet,filterText:a})}}getInsertTextForSnippetValue(e,t,r,n){return _t(e,"",(e=>{if("string"==typeof e){if("^"===e[0])return e.substr(1);if("true"===e||"false"===e)return`"${e}"`}return e}),Object.assign(Object.assign({},r),{indentation:this.indentation}),n)+t}addBooleanValueCompletion(e,t,r){r.add({kind:this.getSuggestionKind("boolean"),label:e?"true":"false",insertText:this.getInsertTextForValue(e,t,"boolean"),insertTextFormat:h.lO.Snippet,documentation:""})}addNullValueCompletion(e,t){t.add({kind:this.getSuggestionKind("null"),label:"null",insertText:"null"+e,insertTextFormat:h.lO.Snippet,documentation:""})}getLabelForSnippetValue(e){return JSON.stringify(e).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")}getCustomTagValueCompletions(e){Ie(this.customTags).forEach((t=>{const r=t.split(" ")[0];this.addCustomTagValueCompletion(e," ",r)}))}addCustomTagValueCompletion(e,t,r){e.add({kind:this.getSuggestionKind("string"),label:r,insertText:r+t,insertTextFormat:h.lO.Snippet,documentation:""})}getDocumentationWithMarkdownText(e,t){let r=e;return this.doesSupportMarkdown()&&(t=t.replace(/\${[0-9]+[:|](.*)}/g,((e,t)=>t)).replace(/\$([0-9]+)/g,""),r=this.fromMarkup(`${e}\n \`\`\`\n${t}\n\`\`\``)),r}getSuggestionKind(e){if(Array.isArray(e)){const t=e;e=t.length>0?t[0]:null}if(!e)return h.cm.Value;switch(e){case"string":default:return h.cm.Value;case"object":return h.cm.Module;case"property":return h.cm.Property}}getCurrentWord(e,t){let r=t-1;const n=e.getText();for(;r>=0&&-1===' \t\n\r\v":{[,]}'.indexOf(n.charAt(r));)r--;return n.substring(r+1,t)}fromMarkup(e){if(e&&this.doesSupportMarkdown())return{kind:h.a4.Markdown,value:e}}doesSupportMarkdown(){if(void 0===this.supportsMarkdown){const e=this.clientCapabilities.textDocument&&this.clientCapabilities.textDocument.completion;this.supportsMarkdown=e&&e.completionItem&&Array.isArray(e.completionItem.documentationFormat)&&-1!==e.completionItem.documentationFormat.indexOf(h.a4.Markdown)}return this.supportsMarkdown}findItemAtOffset(e,t,r){for(let t=e.items.length-1;t>=0;t--){const n=e.items[t];if((0,m.UG)(n)&&n.range){if(r>n.range[1])return t;if(r>=n.range[0])return t}}return 0}}(c,a,pt,i),g=new class{constructor(e,t){this.telemetry=t,this.shouldHover=!0,this.schemaService=e}configure(e){e&&(this.shouldHover=e.hover)}doHover(e,t,r=!1){try{if(!this.shouldHover||!e)return Promise.resolve(void 0);const n=pt.getYamlDocument(e),s=ke(e.offsetAt(t),n);if(null===s)return Promise.resolve(void 0);Pt(n.documents,r);const i=n.documents.indexOf(s);return s.currentDocIndex=i,this.getHover(e,t,s)}catch(e){this.telemetry.sendError("yaml.hover.error",{error:se(e)})}}getHover(e,t,r){const n=e.offsetAt(t);let s=r.getNodeFromOffset(n);if(!s||("object"===s.type||"array"===s.type)&&n>s.offset+1&&n<s.offset+s.length-1)return Promise.resolve(null);const i=s;if("string"===s.type){const e=s.parent;if(e&&"property"===e.type&&e.keyNode===s&&(s=e.valueNode,!s))return Promise.resolve(null)}const o=h.e6.create(e.positionAt(i.offset),e.positionAt(i.offset+i.length));return this.schemaService.getSchemaForResource(e.uri,r).then((e=>{if(e&&s&&!e.errors.length){const n=r.getMatchingSchemas(e.schema,s.offset);let i,a,c,l;const h=[];n.every((e=>{if(e.node===s&&!e.inverted&&e.schema){if(i=i||e.schema.title||e.schema.closestTitle,a=a||e.schema.markdownDescription||jt(e.schema.description),e.schema.enum){const t=e.schema.enum.indexOf(Qe(s));e.schema.markdownEnumDescriptions?c=e.schema.markdownEnumDescriptions[t]:e.schema.enumDescriptions&&(c=jt(e.schema.enumDescriptions[t])),c&&(l=e.schema.enum[t],"string"!=typeof l&&(l=JSON.stringify(l)))}e.schema.examples&&e.schema.examples.forEach((e=>{h.push(JSON.stringify(e))}))}return!0}));let m="";return i&&(m="#### "+jt(i)),a&&(m.length>0&&(m+="\n\n"),m+=a),c&&(m.length>0&&(m+="\n\n"),m+=`\`${t=l,-1!==t.indexOf("`")?"`` "+t+" ``":t}\`: ${c}`),0!==h.length&&(m.length>0&&(m+="\n\n"),m+="Examples:",h.forEach((e=>{m+=`\n\n\`\`\`${e}\`\`\``}))),m.length>0&&e.schema.url&&(m+=`\n\nSource: [${function(e){let t="JSON Schema";const r=e.url;if(r){const e=u.o.parse(r);t=f.basename(e.fsPath)}else e.title&&(t=e.title);return t}(e.schema)}](${e.schema.url})`),{contents:{kind:"markdown",value:m},range:o}}var t;return null}))}}(c,i),y=new class{constructor(e,t){this.telemetry=t,this.jsonDocumentSymbols=new ye(e),this.jsonDocumentSymbols.getKeyLabel=e=>{const t=e.keyNode.internalNode;let r="";return r=(0,m._N)(t)?"{}":(0,m.xw)(t)?"[]":t.source,r}}findDocumentSymbols(e,t={resultLimit:Number.MAX_VALUE}){let r=[];try{const n=pt.getYamlDocument(e);if(!n||0===n.documents.length)return null;for(const s of n.documents)s.root&&(r=r.concat(this.jsonDocumentSymbols.findDocumentSymbols(e,s,t)))}catch(e){this.telemetry.sendError("yaml.documentSymbols.error",{error:se(e)})}return r}findHierarchicalDocumentSymbols(e,t={resultLimit:Number.MAX_VALUE}){let r=[];try{const n=pt.getYamlDocument(e);if(!n||0===n.documents.length)return null;for(const s of n.documents)s.root&&(r=r.concat(this.jsonDocumentSymbols.findDocumentSymbols2(e,s,t)))}catch(e){this.telemetry.sendError("yaml.hierarchicalDocumentSymbols.error",{error:se(e)})}return r}}(c,i),v=new class{constructor(e,t){this.telemetry=t,this.MATCHES_MULTIPLE="Matches multiple schemas when only one must validate.",this.validationEnabled=!0,this.jsonValidation=new ue(e,Promise),this.additionalValidation=new class{constructor(){this.validators=[],this.validators.push(new class{validate(e,t){const r=[],n=new Set,s=new Set,i=new Map;(0,m.Vn)(t.internalDocument,((e,r,o)=>{(0,m.UG)(r)&&(((0,m.uZ)(r)||(0,m.jF)(r))&&r.anchor&&(n.add(r),i.set(r,o[o.length-1])),(0,m.lA)(r)&&s.add(r.resolve(t.internalDocument)))}));for(const t of n)if(!s.has(t)){const n=this.getAnchorNode(i.get(t));if(n){const t=h.e6.create(e.positionAt(n.offset),e.positionAt(n.offset+n.source.length)),s=h.R9.create(t,`Unused anchor "${n.source}"`,h.H_.Hint,0);s.tags=[h.$u.Unnecessary],r.push(s)}}return r}getAnchorNode(e){if(e&&e.srcToken){const t=e.srcToken;if(ut(t))return Vt(t);if(m.Ol.isCollection(t))for(const e of t.items){const t=Vt(e);if(t)return t}}}})}validate(e,t){const r=[];for(const n of this.validators)r.push(...n.validate(e,t));return r}}}configure(e){e&&(this.validationEnabled=e.validate,this.customTags=e.customTags,this.disableAdditionalProperties=e.disableAdditionalProperties,this.yamlVersion=e.yamlVersion)}doValidation(e,t=!1){return r=this,n=void 0,i=function*(){if(!this.validationEnabled)return Promise.resolve([]);const r=[];try{const n=pt.getYamlDocument(e,{customTags:this.customTags,yamlVersion:this.yamlVersion},!0);let s=0;for(const i of n.documents){i.isKubernetes=t,i.currentDocIndex=s,i.disableAdditionalProperties=this.disableAdditionalProperties;const n=yield this.jsonValidation.doValidation(e,i),o=i;o.errors.length>0&&r.push(...o.errors),o.warnings.length>0&&r.push(...o.warnings),r.push(...n),r.push(...this.additionalValidation.validate(e,i)),s++}}catch(e){this.telemetry.sendError("yaml.validation.error",se(e))}let n;const s=new Set,i=[];for(let o of r){if(t&&o.message===this.MATCHES_MULTIPLE)continue;if(Object.prototype.hasOwnProperty.call(o,"location")&&(o=kt(o,e)),o.source||(o.source=Re),n&&n.message===o.message&&n.range.end.line===o.range.start.line&&Math.abs(n.range.end.character-o.range.end.character)>=1){n.range.end=o.range.end;continue}n=o;const r=o.range.start.line+" "+o.range.start.character+" "+o.message;s.has(r)||(i.push(o),s.add(r))}return i},new((s=void 0)||(s=Promise))((function(e,t){function o(e){try{c(i.next(e))}catch(e){t(e)}}function a(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof s?r:new s((function(e){e(r)}))).then(o,a)}c((i=i.apply(r,n||[])).next())}));var r,n,s,i}}(c,i),b=new class{constructor(){this.formatterEnabled=!0}configure(e){e&&(this.formatterEnabled=e.format)}format(e,t){if(!this.formatterEnabled)return[];try{const s=e.getText(),i={parser:"yaml",plugins:[n||(n=r.t(d,2))],tabWidth:t.tabWidth||t.tabSize,singleQuote:t.singleQuote,bracketSpacing:t.bracketSpacing,proseWrap:"always"===t.proseWrap?"always":"never"===t.proseWrap?"never":"preserve",printWidth:t.printWidth},o=p.format(s,i);return[h.PY.replace(h.e6.create(h.Ly.create(0,0),e.positionAt(s.length)),o)]}catch(e){return[]}}},x=new class{constructor(e){this.clientCapabilities=e,this.indentation="  "}configure(e){this.indentation=e.indentation}getCodeAction(e,t){if(!t.context.diagnostics)return;const r=[];return r.push(...this.getConvertToBooleanActions(t.context.diagnostics,e)),r.push(...this.getJumpToSchemaActions(t.context.diagnostics)),r.push(...this.getTabToSpaceConverting(t.context.diagnostics,e)),r.push(...this.getUnusedAnchorsDelete(t.context.diagnostics,e)),r}getJumpToSchemaActions(e){var t,r,n,s,i;if(null===(s=null===(n=null===(r=null===(t=this.clientCapabilities)||void 0===t?void 0:t.window)||void 0===r?void 0:r.showDocument)||void 0===n?void 0:n.support)||void 0===s||!s)return[];const o=new Map;for(const t of e){const e=(null===(i=t.data)||void 0===i?void 0:i.schemaUri)||[];for(const r of e)r&&(o.has(r)||o.set(r,[]),o.get(r).push(t))}const a=[];for(const e of o.keys()){const t=h.B2.create(`Jump to schema location (${f.basename(e)})`,h.mY.create("JumpToSchema",Ct.JUMP_TO_SCHEMA,e));t.diagnostics=o.get(e),a.push(t)}return a}getTabToSpaceConverting(e,t){const r=[],n=new vt(t),s=[];for(const i of e)if("Using tabs can lead to unpredictable results"===i.message){if(s.includes(i.range.start.line))continue;const e=n.getLineContent(i.range.start.line);let o=0,a="";for(let t=i.range.start.character;t<=i.range.end.character&&"\t"===e.charAt(t);t++)o++,a+=this.indentation;s.push(i.range.start.line);let c=i.range;o!==i.range.end.character-i.range.start.character&&(c=h.e6.create(i.range.start,h.Ly.create(i.range.end.line,i.range.start.character+o))),r.push(h.B2.create("Convert Tab to Spaces",Ft(t.uri,[h.PY.replace(c,a)]),h.yN.QuickFix))}if(0!==r.length){const e=[];for(let t=0;t<=n.getLineCount();t++){const r=n.getLineContent(t);let s=0,i="";for(let n=0;n<r.length;n++){const o=r.charAt(n);if(" "!==o&&"\t"!==o){0!==s&&(e.push(h.PY.replace(h.e6.create(t,n-s,t,n),i)),s=0,i="");break}" "!==o||0===s?"\t"===o&&(i+=this.indentation,s++):(e.push(h.PY.replace(h.e6.create(t,n-s,t,n),i)),s=0,i="")}0!==s&&e.push(h.PY.replace(h.e6.create(t,0,t,n.getLineLength(t)),i))}e.length>0&&r.push(h.B2.create("Convert all Tabs to Spaces",Ft(t.uri,e),h.yN.QuickFix))}return r}getUnusedAnchorsDelete(e,t){const r=[],n=new vt(t);for(const s of e)if(s.message.startsWith("Unused anchor")&&s.source===Re){const e=h.e6.create(s.range.start,s.range.end),i=n.getText(e),o=X(n.getLineContent(e.end.line),e.end.character);e.end.character=o;const a=h.B2.create(`Delete unused anchor: ${i}`,Ft(t.uri,[h.PY.del(e)]),h.yN.QuickFix);a.diagnostics=[s],r.push(a)}return r}getConvertToBooleanActions(e,t){const r=[];for(const n of e)if('Incorrect type. Expected "boolean".'===n.message){const e=t.getText(n.range).toLocaleLowerCase();if('"true"'===e||'"false"'===e||"'true'"===e||"'false'"===e){const s=e.includes("true")?"true":"false";r.push(h.B2.create("Convert to boolean",Ft(t.uri,[h.PY.replace(n.range,s)]),h.yN.QuickFix))}}return r}}(a),S=new class{constructor(e,t){this.schemaService=e,this.telemetry=t}getCodeLens(e){return t=this,r=void 0,s=function*(){const t=[];try{const r=pt.getYamlDocument(e);let n=new Map;for(const t of r.documents){const r=yield this.schemaService.getSchemaForResource(e.uri,t);(null==r?void 0:r.schema)&&(n=new Map([...Dt(null==r?void 0:r.schema),...n]))}for(const e of n){const r=h.JF.create(h.e6.create(0,0,0,0));r.command={title:Lt(e[0],e[1]),command:Ct.JUMP_TO_SCHEMA,arguments:[e[0]]},t.push(r)}}catch(e){this.telemetry.sendError("yaml.codeLens.error",{error:se(e)})}return t},new((n=void 0)||(n=Promise))((function(e,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}c((s=s.apply(t,r||[])).next())}));var t,r,n,s}resolveCodeLens(e){return e}}(c,i),A=new class{constructor(e){this.telemetry=e}findLinks(e){try{const t=pt.getYamlDocument(e),r=[];for(const n of t.documents)r.push(Pe(e,n));return Promise.all(r).then((e=>[].concat(...e)))}catch(e){this.telemetry.sendError("yaml.documentLink.error",{error:se(e)})}}}(i),T=new class{constructor(e){this.telemetry=e}getDefinition(e,t){try{const r=pt.getYamlDocument(e),n=e.offsetAt(t.position),s=ke(n,r);if(s){const[t]=s.getNodeFromPosition(n,new vt(e));if(t&&(0,m.lA)(t)){const r=t.resolve(s.internalDocument);if(r&&r.range){const t=h.e6.create(e.positionAt(r.range[0]),e.positionAt(r.range[2])),n=h.e6.create(e.positionAt(r.range[0]),e.positionAt(r.range[1]));return[h._Z.create(e.uri,t,n)]}}}}catch(e){this.telemetry.sendError("yaml.definition.error",{error:se(e)})}}}(i);return new Zt(c,o,s),function(e,t){e.registerCommand(Ct.JUMP_TO_SCHEMA,(e=>{return r=this,n=void 0,i=function*(){if(e){if(!e.startsWith("file")&&!/^[a-z]:[\\/]/i.test(e)){const t=u.o.parse(e),r=u.o.from({scheme:"json-schema",authority:t.authority,path:t.path.endsWith(".json")?t.path:t.path+".json",fragment:e});e=r.toString()}if(/^[a-z]:[\\/]/i.test(e)){const t=u.o.file(e);e=t.toString()}(yield t.window.showDocument({uri:e,external:!1,takeFocus:!0}))||t.window.showErrorMessage(`Cannot open ${e}`)}},new((s=void 0)||(s=Promise))((function(e,t){function o(e){try{c(i.next(e))}catch(e){t(e)}}function a(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof s?r:new s((function(e){e(r)}))).then(o,a)}c((i=i.apply(r,n||[])).next())}));var r,n,s,i}))}(Nt,s),{configure:e=>{c.clearExternalSchemas(),e.schemas&&(c.schemaPriorityMapping=new Map,e.schemas.forEach((e=>{const t=e.priority?e.priority:0;c.addSchemaPriority(e.uri,t),c.registerExternalSchema(e.uri,e.fileMatch,e.schema,e.name,e.description,e.versions)}))),v.configure(e),g.configure(e),l.configure(e),b.configure(e),x.configure(e)},registerCustomSchemaProvider:e=>{c.registerCustomSchemaProvider(e)},findLinks:A.findLinks.bind(A),doComplete:l.doComplete.bind(l),doValidation:v.doValidation.bind(v),doHover:g.doHover.bind(g),findDocumentSymbols:y.findDocumentSymbols.bind(y),findDocumentSymbols2:y.findHierarchicalDocumentSymbols.bind(y),doDefinition:T.getDefinition.bind(T),resetSchema:e=>c.onResourceChange(e),doFormat:b.format.bind(b),doDocumentOnTypeFormatting:Et,addSchema:(e,t)=>c.saveSchema(e,t),deleteSchema:e=>c.deleteSchema(e),modifySchemaContent:e=>c.addContent(e),deleteSchemaContent:e=>c.deleteContent(e),deleteSchemasWhole:e=>c.deleteSchemas(e),getFoldingRanges:It,getCodeAction:(e,t)=>x.getCodeAction(e,t),getCodeLens:e=>S.getCodeLens(e),resolveCodeLens:e=>S.resolveCodeLens(e)}}async function Qt(e){const t=await fetch(e);if(t.ok)return t.text();throw new Error(`Schema request failed for ${e}`)}(Kt=Ht||(Ht={}))[Kt.SchemaStore=1]="SchemaStore",Kt[Kt.SchemaAssociation=2]="SchemaAssociation",Kt[Kt.Settings=3]="Settings",Kt[Kt.Modeline=4]="Modeline",(0,a.j)(((e,{enableSchemaRequest:t,languageSettings:r})=>{const n=Xt(t?Qt:null,null,null,null,null);n.configure(r);const s=t=>{const r=e.getMirrorModels();for(const e of r)if(String(e.uri)===t)return c.n.create(t,"yaml",e.version,e.getValue())};return{doValidation(e){const t=s(e);return t?n.doValidation(t,r.isKubernetes):[]},doComplete(e,t){const i=s(e);return n.doComplete(i,t,r.isKubernetes)},doDefinition(e,t){const r=s(e);return n.doDefinition(r,{position:t,textDocument:{uri:e}})},doHover(e,t){const r=s(e);return n.doHover(r,t)},format(e,t){const r=s(e);return n.doFormat(r,t)},resetSchema:e=>n.resetSchema(e),findDocumentSymbols(e){const t=s(e);return n.findDocumentSymbols2(t,{})},findLinks(e){const t=s(e);return n.findLinks(t)},getCodeAction(e,t,r){const i=s(e);return n.getCodeAction(i,{range:t,textDocument:{uri:e},context:{diagnostics:r}})}}}))}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return s[e](r,r.exports,o),r.exports}o.m=s,o.x=()=>{var e=o.O(void 0,[4200,2353],(()=>o(9616)));return o.O(e)},e=[],o.O=(t,r,n,s)=>{if(!r){var i=1/0;for(u=0;u<e.length;u++){for(var[r,n,s]=e[u],a=!0,c=0;c<r.length;c++)(!1&s||i>=s)&&Object.keys(o.O).every((e=>o.O[e](r[c])))?r.splice(c--,1):(a=!1,s<i&&(i=s));if(a){e.splice(u--,1);var l=n();void 0!==l&&(t=l)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[r,n,s]},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var s=Object.create(null);o.r(s);var i={};t=t||[null,r({}),r([]),r(r)];for(var a=2&n&&e;"object"==typeof a&&!~t.indexOf(a);a=r(a))Object.getOwnPropertyNames(a).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,o.d(s,i),s},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,r)=>(o.f[r](e,t),t)),[])),o.u=e=>({2353:"7398e6132b5aa2054584",4200:"f8820ff725a0bbe40374"}[e]+".js"),o.miniCssF=e=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={9616:1};o.f.i=(t,r)=>{e[t]||importScripts(o.p+o.u(t))};var t=self.webpackChunkeditor_frame=self.webpackChunkeditor_frame||[],r=t.push.bind(t);t.push=t=>{var[n,s,i]=t;for(var a in s)o.o(s,a)&&(o.m[a]=s[a]);for(i&&i(o);n.length;)e[n.pop()]=1;r(t)}})(),n=o.x,o.x=()=>Promise.all([o.e(4200),o.e(2353)]).then(n),o.x()})();
//# sourceMappingURL=589c33581ce08529cbc9.js.map