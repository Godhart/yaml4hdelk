<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Schematic of unit2</title>
  <script type="text/javascript" src="./js/d3hw/d3.js"></script>
  <!-- <script type="text/javascript" src="./js/d3hw/d3.min.js"></script>  -->
  <script type="text/javascript" src="./js/d3hw/elk.bundled.js"></script>
  <script type="text/javascript" src="./js/d3hw/d3-hwschematic.js"></script>
  <link href="./css/d3/d3-hwschematic.css" rel="stylesheet">
  <style>
  	body {
	   margin: 0;
    }
  </style>
</head>
<body>
    <svg id="scheme-placeholder"></svg>
    <script>
        // schematic rendering script

        function viewport() {
          var e = window,
            a = 'inner';
          if (!('innerWidth' in window)) {
            a = 'client';
            e = document.documentElement || document.body;
          }
          return {
            width: e[a + 'Width'],
            height: e[a + 'Height']
          }
        }

        var width = viewport().width,
            height = viewport().height;

        var svg = d3.select("#scheme-placeholder")
            .attr("width", width)
            .attr("height", height);

        var orig = document.body.onresize;
        document.body.onresize = function(ev) {
            if (orig)
        	    orig(ev);

            var w = viewport();
            svg.attr("width", w.width);
			      svg.attr("height", w.height);
        }

        var hwSchematic = new d3.HwSchematic(svg);
        var zoom = d3.zoom();
        zoom.on("zoom", function applyTransform(ev) {
        	hwSchematic.root.attr("transform", ev.transform)
        });

        // disable zoom on doubleclick
        // because it interferes with component expanding/collapsing
        svg.call(zoom)
           .on("dblclick.zoom", null)

    </script>
    <script>
          function displayContents() {
            var graph = {
  "hwMeta": {
    "cls": null,
    "children": [],
    "name": "/",
    "maxId": 25
  },
  "properties": {
    "org.eclipse.elk.portConstraints": "FIXED_ORDER",
    "org.eclipse.elk.layered.mergeEdges": 1
  },
  "ports": [],
  "id": "0",
  "children": [
    {
      "hwMeta": {
        "cls": null,
        "children": [],
        "isExternalPort": true,
        "name": "/.IN1",
        "maxId": 8
      },
      "properties": {
        "org.eclipse.elk.portConstraints": "FIXED_ORDER",
        "org.eclipse.elk.layered.mergeEdges": 1
      },
      "ports": [
        {
          "hwMeta": {
            "name": "IN1"
          },
          "connectedAsParent": false,
          "properties": {
            "side": "EAST",
            "index": 1000
          },
          "id": "7",
          "direction": "OUTPUT"
        }
      ],
      "id": "6"
    },
    {
      "hwMeta": {
        "cls": null,
        "children": [],
        "isExternalPort": true,
        "name": "/.IN2",
        "maxId": 10
      },
      "properties": {
        "org.eclipse.elk.portConstraints": "FIXED_ORDER",
        "org.eclipse.elk.layered.mergeEdges": 1
      },
      "ports": [
        {
          "hwMeta": {
            "name": "IN2"
          },
          "connectedAsParent": false,
          "properties": {
            "side": "EAST",
            "index": 1000
          },
          "id": "9",
          "direction": "OUTPUT"
        }
      ],
      "id": "8"
    },
    {
      "hwMeta": {
        "cls": null,
        "children": [],
        "isExternalPort": true,
        "name": "/.OUT",
        "maxId": 12
      },
      "properties": {
        "org.eclipse.elk.portConstraints": "FIXED_ORDER",
        "org.eclipse.elk.layered.mergeEdges": 1
      },
      "ports": [
        {
          "hwMeta": {
            "name": "OUT"
          },
          "connectedAsParent": false,
          "properties": {
            "side": "WEST",
            "index": -1000
          },
          "id": "11",
          "direction": "INPUT"
        }
      ],
      "id": "10"
    },
    {
      "hwMeta": {
        "cls": null,
        "children": [],
        "isExternalPort": true,
        "name": "/.CLK",
        "maxId": 14
      },
      "properties": {
        "org.eclipse.elk.portConstraints": "FIXED_ORDER",
        "org.eclipse.elk.layered.mergeEdges": 1
      },
      "ports": [
        {
          "hwMeta": {
            "name": "CLK"
          },
          "connectedAsParent": false,
          "properties": {
            "side": "EAST",
            "index": 1000
          },
          "id": "13",
          "direction": "OUTPUT"
        }
      ],
      "id": "12"
    },
    {
      "hwMeta": {
        "cls": null,
        "children": [],
        "name": "/U1",
        "maxId": 18
      },
      "properties": {
        "org.eclipse.elk.portConstraints": "FIXED_ORDER",
        "org.eclipse.elk.layered.mergeEdges": 1
      },
      "ports": [
        {
          "hwMeta": {
            "name": "D"
          },
          "connectedAsParent": false,
          "properties": {
            "side": "WEST",
            "index": -1000
          },
          "id": "15",
          "direction": "INPUT"
        },
        {
          "hwMeta": {
            "name": "Q"
          },
          "connectedAsParent": false,
          "properties": {
            "side": "EAST",
            "index": 1000
          },
          "direction": "OUTPUT",
          "id": "16"
        },
        {
          "hwMeta": {
            "name": "CLK"
          },
          "connectedAsParent": false,
          "properties": {
            "side": "WEST",
            "index": -2000
          },
          "id": "17",
          "direction": "INPUT"
        }
      ],
      "id": "14"
    },
    {
      "hwMeta": {
        "cls": "Operator",
        "children": [],
        "name": "MUX",
        "maxId": 23
      },
      "properties": {
        "org.eclipse.elk.portConstraints": "FIXED_ORDER",
        "org.eclipse.elk.layered.mergeEdges": 1
      },
      "ports": [
        {
          "hwMeta": {
            "name": "S"
          },
          "connectedAsParent": false,
          "properties": {
            "side": "SOUTH",
            "index": -1000
          },
          "id": "19",
          "direction": "INPUT"
        },
        {
          "hwMeta": {
            "name": "A"
          },
          "connectedAsParent": false,
          "properties": {
            "side": "WEST",
            "index": -1000
          },
          "direction": "INPUT",
          "id": "20"
        },
        {
          "hwMeta": {
            "name": "B"
          },
          "connectedAsParent": false,
          "properties": {
            "side": "WEST",
            "index": -2000
          },
          "direction": "INPUT",
          "id": "21"
        },
        {
          "hwMeta": {
            "name": "O"
          },
          "connectedAsParent": false,
          "properties": {
            "side": "EAST",
            "index": 1000
          },
          "direction": "OUTPUT",
          "id": "22"
        }
      ],
      "id": "18"
    },
    {
      "hwMeta": {
        "cls": null,
        "children": [],
        "isExternalPort": true,
        "name": "/.DBG",
        "maxId": 25
      },
      "properties": {
        "org.eclipse.elk.portConstraints": "FIXED_ORDER",
        "org.eclipse.elk.layered.mergeEdges": 1
      },
      "ports": [
        {
          "hwMeta": {
            "name": "DBG"
          },
          "connectedAsParent": false,
          "properties": {
            "side": "WEST",
            "index": -1000
          },
          "id": "24",
          "direction": "INPUT"
        }
      ],
      "id": "23"
    }
  ],
  "edges": [
    {
      "sources": [
        [
          "6",
          "7"
        ]
      ],
      "targets": [
        [
          "14",
          "15"
        ],
        [
          "18",
          "20"
        ]
      ],
      "hwMeta": {
        "name": "IN1"
      },
      "id": "1"
    },
    {
      "sources": [
        [
          "12",
          "13"
        ]
      ],
      "targets": [
        [
          "14",
          "17"
        ],
        [
          "18",
          "19"
        ]
      ],
      "hwMeta": {
        "name": "CLK"
      },
      "id": "2"
    },
    {
      "sources": [
        [
          "14",
          "16"
        ]
      ],
      "targets": [
        [
          "23",
          "24"
        ]
      ],
      "hwMeta": {
        "name": "DBG"
      },
      "id": "3"
    },
    {
      "sources": [
        [
          "8",
          "9"
        ]
      ],
      "targets": [
        [
          "18",
          "21"
        ]
      ],
      "hwMeta": {
        "name": "IN2"
      },
      "id": "4"
    },
    {
      "sources": [
        [
          "18",
          "22"
        ]
      ],
      "targets": [
        [
          "10",
          "11"
        ]
      ],
      "hwMeta": {
        "name": "OUT"
      },
      "id": "5"
    }
  ]
};
            if (graph.hwMeta && graph.hwMeta.name)
                 document.title = graph.hwMeta.name; // #TODO: use proper field for title
            // load the data and render the elements
            hwSchematic.bindData(graph);
          }

          displayContents();
    </script>
</body>
</html>
